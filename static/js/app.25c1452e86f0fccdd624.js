webpackJsonp([1],{"9M+g":function(e,t){},Jmt5:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("7+uW"),a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("link",{attrs:{rel:"stylesheet",href:"//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/styles/default.min.css"}}),e._v(" "),n("div",[n("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info"}},[n("b-navbar-brand",{attrs:{to:"/"}},[e._v("GravitLauncher Wiki")]),e._v(" "),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),e._v(" "),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item-dropdown",{attrs:{text:"Разделы",right:""}},[n("b-dropdown-item",{attrs:{to:"/"}},[e._v("Главная")]),e._v(" "),n("b-dropdown-item",{attrs:{to:"/authprovider"}},[e._v("AuthProvider")]),e._v(" "),n("b-dropdown-item",{attrs:{to:"/authhandler"}},[e._v("AuthHandler")]),e._v(" "),n("b-dropdown-item",{attrs:{to:"/protection"}},[e._v("Защита")]),e._v(" "),n("b-dropdown-item",{attrs:{to:"/clientbuild"}},[e._v("Сборка клиента")]),e._v(" "),n("b-dropdown-item",{attrs:{to:"/serverbuild"}},[e._v("Сборка сервера")])],1),e._v(" "),n("b-nav-item-dropdown",{attrs:{text:"Разработчикам",right:""}},[n("b-dropdown-item",{attrs:{to:"/developerapi"}},[e._v("Написание модулей")])],1)],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"content"},[n("router-view")],1)])},staticRenderFns:[]};var r=n("VU/8")({name:"App"},a,!1,function(e){n("T53T")},null,null).exports,i=n("/ocq"),v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wiki"},[e._m(0),e._v(" "),n("h2",[e._v("Начало работы")]),e._v(" "),n("b",[e._v("Ставьте только те модули, что вам действительно необходимы. Большинство модулей требует дополнительной\n    конфигурации")]),n("br"),e._v("\n  Модули, заканчивающиеся на "),n("span",{staticClass:"codes"},[e._v("_module")]),e._v(" - для лаунчсервера, на "),n("span",{staticClass:"codes"},[e._v("_lmodule")]),e._v(" - для лаунчера(требутется LauncherModuleLoader), на "),n("span",{staticClass:"codes"},[e._v("_swmodule")]),e._v(" для ServerWrapper'а"),n("br"),e._v(" "),n("ol",[e._m(1),e._v(" "),e._m(2),e._v(" "),n("li",[n("details",[n("summary",{attrs:{tabindex:"2"}},[e._v("Конфигурация лаунчсервера")]),e._v(" "),n("p",[e._v("Это конфигурация для 5.1.0. Ваш конфиг может отличаться. Все пояснения ниже приведены для ознакомления, не\n          пытайтесь копировать конфиг или его часть себе")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n{\n  "projectName": "GravitTestProject", // Название вашего проекта. Влияет на названия классов в .jar(proguard mapping), папку вашего сервера в AppData, название окна и многое другое\n  "mirrors": [ //Один или несколько зеркал, с которых будут скачиваться клиенты командами downloadClient/downloadAsset\n    "https://mirror.gravit.pro/"\n  ],\n  "binaryName": "Launcher", //Имя бинарника в папке updates. Меняя его не забывайте менять URL скачки\n  "copyBinaries": true, //Копировать ли бинарники в updates\n  "env": "STD", //Окружение, влияет на уровень отладочных сообщений\n                //DEV - наибольший объем отладочных сообщений(launcher.dev/launcher.debug/launcher.stacktrace)\n                //DEBUG - обычные отладочные сообщения(launcher.debug/launcher.stacktrace)\n                //STD - отладка отключена по умолчанию, можно включить параметром\n                //PROD - запрет установки флагов launcher.debug/launcher.stacktrace. Никаких отладочных сообщений\n  "auth": { //Способы авторизации\n    "std": {\n      "provider": { //Auth Provider, отвечает за проверку пары логин-пароль\n        "type": "accept"\n      },\n      "handler": { //Auth Handler, отвечает за UUID, вход на сервера\n        "type": "memory"\n      },\n      "textureProvider": { //Texture Provider, отвечает за скины и плащи\n        "skinURL": "http://example.com/skins/%username%.png",\n        "cloakURL": "http://example.com/cloaks/%username%.png",\n        "type": "request"\n      },\n      "hwid": { //HWID Handler, отвечает за бан по HWID\n        "type": "accept"\n      },\n      "links": { //Позволяет использовать нескольким способам авторизации один handler/provider\n        "provider": "myauth" //В качестве AuthProvider для этого способа авторизации использовать AuthProvider способа авторизации "myauth" \n      }\n      "displayName": "Default", //Отобращаемое имя на экране логина лаунчера. Можно менять\n      "isDefault": true //Способ авторизации по умолчанию\n    }\n  },\n  "protectHandler": { //Protect Handler, отвечает за токены, выдачу accessToken\n    "checkSecure": true,\n    "type": "std"\n  },\n  "components": { //Опциональные компоненты\n    "regLimiter": { //Лимит регистраций(через Hibernate/DAO)\n      "message": "Превышен лимит регистраций",\n      "excludeIps": [],\n      "rateLimit": 3,\n      "rateLimitMillis": 36000000,\n      "exclude": [],\n      "type": "regLimiter"\n    },\n    "authLimiter": { //Лимит авторизаций\n      "message": "Превышен лимит авторизаций",\n      "rateLimit": 3,\n      "rateLimitMillis": 8000,\n      "exclude": [],\n      "type": "authLimiter"\n    }\n  },\n  "launch4j": { //Создание EXE из JAR\n    "enabled": true,\n    "setMaxVersion": false, //Используется если вы хотите ограничить максимальную версию Java, к примеру что бы EXE файл launch4j выбрал Java 8 если установлена Java 9/11/13\n    "maxVersion": "1.8.999",\n    "minVersion": "1.8.0",\n    "downloadUrl": "http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html",\n    "productName": "GravitLauncher",\n    "productVer": "5.1.0.0",\n    "fileDesc": "GravitLauncher 5.1.0",\n    "fileVer": "5.1.0.0",\n    "internalName": "Launcher",\n    "copyright": "© GravitLauncher Team",\n    "trademarks": "This product is licensed under GPLv3",\n    "txtFileVersion": "%s, build %d",\n    "txtProductVersion": "%s, build %d"\n  },\n  "netty": {\n    "fileServerEnabled": true, //Включить раздачу файлов из updates по http\n    "sendExceptionEnabled": true, //Разрешить отправку сообщений об ошибке лаунчсервера на клиент. Рекомендуется false для прода\n    "ipForwarding": false, //Разрешить проксирование реального IP через HTTP заголовки. Включить если используется проксирование nginx/apache2/cloudflare\n    "showHiddenFiles": false, //Разрешает раздачу файлов, начинающихся с точки(.)\n    "launcherURL": "http://localhost:9274/Launcher.jar", //URL скачки лаунчера(JAR)\n    "downloadURL": "http://localhost:9274/%dirname%/", //URL скачки клиентов и ассетов\n    "launcherEXEURL": "http://localhost:9274/Launcher.exe", //URL скачки лаунчера(EXE)\n    "address": "ws://localhost:9274/api", //Адрес WebSocket API, по которому лаунчер будет подключаться\n    "bindings": {}, //Настройка особых URL для скачки ассетов/клиентов\n    "performance": { //Настройки производительности\n      "usingEpoll": true, //Epoll, технология доступная только в Linux, ускоряет работу с множеством соеденений\n      "bossThread": 2, //Начальное число потоков на прием соеденений\n      "workerThread": 8 //Начальное число потоков на обработку запросов\n    },\n    "binds": [ //Адреса прослушивания сокета(bind)\n      {\n        "address": "0.0.0.0",\n        "port": 9274\n      }\n    ],\n    "logLevel": "DEBUG" //Уровень сообщений Netty в логгере slf4j\n  },\n  "whitelistRejectString": "Вас нет в белом списке",\n  "launcher": { //Конфигурация лаунчера и его сборки\n    "guardType": "no", //Тип нативной защиты AntiInject(см инструкцию к вашей нативной защите)\n    "attachLibraryBeforeProGuard": false, //Добавление библиотек до proguard. Включать если это требуется по инструкции к кастомному конфигу proguard\n    "compress": true, //Сжатие итогового файла\n    "warningMissArchJava": true, //Предупреждение о несоответствии разрядности b/или версии Java. Отключите елси используется скачивание своей JRE\n    "enabledProGuard": false, //Включить обфускацию(ProGuard)\n    "stripLineNumbers": false, //Включить вырезание отладочной информации\n    "deleteTempFiles": true, //Удалять временные файлы в папке build\n    "proguardGenMappings": true //Включить генерацию маппингов proguard\n  },\n  "certificate": { //Не включать\n    "enabled": false\n  },\n  "sign": { //Подпись лаунчера. См отдельный раздел\n    "enabled": true,\n    "keyStore": "GravitCodeSignEC_Java.p12",\n    "keyStoreType": "PKCS12",\n    "keyStorePass": "password",\n    "metaInfKeyName": "SIGNUMO.EC",\n    "metaInfSfName": "SIGNUMO.SF",\n    "keyAlias": "1",\n    "keyPass": "password",\n    "signAlgo": "SHA256withECDSA"\n  },\n  "dao": { //Нстройка DAO/Hibernate. См отдельный раздел\n    "type": "hibernate",\n    "driver": "org.postgresql.Driver",\n    "url": "jdbc:postgresql://localhost/launcher",\n    "username": "launcher",\n    "password": "password",\n    "pool_size": "4"\n   },\n  "startScript": "./start.sh" //Скрипт запуска лаунчсервера(используется только в команде restart)\n}\n')])])])]),e._v(" "),n("li",[e._v("Настраиваем "),n("router-link",{attrs:{to:"/authprovider"}},[e._v("AuthProvider")]),e._v(" и "),n("router-link",{attrs:{to:"/authhandler"}},[e._v("\n        AuthHandler")])],1),e._v(" "),n("li",[e._v("Собираем "),n("router-link",{attrs:{to:"/clientbuild"}},[e._v("клиент")])],1),e._v(" "),n("li",[e._v("Подключаем ваш майнкрафт сервер с помощью "),n("router-link",{attrs:{to:"/serverbuild"}},[e._v("ServerWrapper")])],1),e._v(" "),n("li",[e._v("Настраиваем "),n("router-link",{attrs:{to:"/protection"}},[e._v("защиту")])],1)]),e._v(" "),e._m(3),e._v(" "),n("hr"),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),n("h2",[e._v("Команды LaunchServer")]),e._v(" "),n("p",[e._v("Простейшие команды, которые понядобятся в первую очередь:")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"ini"},[e._v("\n    help [command name] - Вывести справку по команде или по всем командам\n    stop [nothing] - Остановить LaunchServer\n    build [nothing] - Собрать Launcher.jar\n    downloadclient [version] [dir] - скачать клиент с зеркала\n    downloadasset [version] [dir] - скачать ассеты с зеркала\n    syncupdates [subdirs...] - синхронизировать хеши в памяти с файлами в updates на диске\n    syncprofiles [nothing] - синхронизировать профили в памяти с файлами в profiles на диске\n    debug [true/false] [true/false] - включает или отключает режим отладки в лаунчсервере\n    version [nothing] - версия лаунчсервера если вдруг забыли\n    ")])]),e._v(" "),n("p",[e._v("Еще команды:")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"ini"},[e._v("\n    uuidtousername (uuid) (auth_id) - получить ник пользователя по его UUID\n    auth (login) (password) (auth_id) - попробывать войти с указанным логином и паролем\n    usernametouuid (username) (auth_id) - получить UUID пользователя по нику\n    serverstatus [nothing] - информация о лаунчсервере\n    config [name] [action] [more args] - мультикоманда по управлению компонентами(provider/handler), жмите TAB что бы узнать о доступных компонентах и их командах\n    unindexasset [dir] [index] [output-dir] - преобразовать индексированные ассеты(с хешами в имени) в обычные для удобства редактирования (1.7.10+)\n    indexasset [dir] [index] [output-dir] - соответственно обратная операция (1.7.10+)\n    clients [nothing] - список всех подключенных клиентов\n    dumpsessions [load/unload] [filename] - создать или загрузить дамп сессий. Используется при отсутствии модуля AutoSaveSessions для раучного сохранения и загрузки сессий\n    clear [nothing] - почистить терминал\n    gc [nothing] - запустить Java Garbare Collector\n    modules [nothing] - список всех загруженных модулей\n    notify [head] [message] - послать уведомление, которое увидят все у кого открыт ваш лаунчер\n    ")])]),e._v(" "),n("p",[e._v("Команды DAO(работают только с настроеным Hibernate):")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"ini"},[e._v("\n    setuserpassword [username] [new password] - сменить пароль пользователю\n    getuser [username] - информация о пользователе\n    getallusers  - информация о всех пользователях\n    register [login] [password] - зарегистрировать нового пользователя\n    ")])]),e._v(" "),n("p",[e._v("Экспертные команды из стандартной поставки:")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"ini"},[e._v("\n    proguarddictregen [nothing] - перегенерировать маппинги proguard\n    loadmodule [jar] - загрузить модуль не из папки modules в runtime\n    proguardclean [nothing] - сброс конфига proguard\n    proguardmappingsremove [nothing] - удалить маппинги proguard\n    signjar [path to file] (path to signed file) - подписать JAR файл используя настроеный в sign сертификат(enable в true)\n    signdir [path to dir] - подписать все файлы в папке используя настроеный в sign сертификат(enable в true)\n    component [action] [component name] [more args] - управление компонентами\n    ")])]),e._v(" "),n("p",[e._v("Команды ниже настолько же круты, насколько и опасны. Если вы понимаете что делаете, эти команды будут крайне\n    полезны:")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"ini"},[e._v("\n    setsecuritymanager [allow, logger, system] - Вызов System.setSecurityManager для тестирования(UnsafeCommandsPack)\n    sendauth [connectUUID] [username] [auth_id] [client type] (permissions) (client uuid) - ручная отправка события AuthEvent соеденению в обход AuthProvider(UnsafeCommandsPack)\n    newdownloadasset [version] [dir] - скачать ассеты прямо с Mojang сайта, любой версии(UnsafeCommandsPack)\n    newdownloadclient [version] [dir] - скачать клиент прямо с Mojang сайта, любой версии. Профиль придется создать самостоятельно(UnsafeCommandsPack)\n    patcher [patcher name or class] [path] [test mode(true/false)] (other args) - Запутсить патчер на основе ASM. Позволяет искать пакетхаки в модах(findPacketHack), RAT(findRemote/findDefineClass), UnsafeSunAPI(findSun), поиск и замена любых вызовов по опкоду INVOKESTATIC (pro.gravit.launchermodules.unsafecommands.patcher.StaticReplacerPatcher) (UnsafeCommandsPack)\n    loadjar [jarfile] - добавить в SystemClassLoader любой JAR(используя javaagent)(UnsafeCommandsPack)\n    registercomponent [name] [classname] - зарегистрировать компонент по классу(UnsafeCommandsPack)\n    scriptmappings [nothing] - посмотреть все маппинги классов лаунчсервера в javascript(ServerScriptEngine)\n    synclaunchermodules [] - синхронизировать модули лаунчера(LauncherModuleLoader)\n    eval [line] - выполнить JavaScript код на стороне лаунчсервера(ServerScriptEngine)\n    ")])]),e._v(" "),n("h3",[e._v("Команды лаунчера. Разблокировка консоли. Удаленное управление")]),e._v(" "),e._m(6),e._m(7),e._v(" "),e._m(8),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"ini"},[e._v("\n    [Unit]\n    Description=LaunchServer\n    After=network.target\n    \n    [Service]\n    WorkingDirectory=/home/launchserver/\n    Type=notify\n    User=launchserver\n    Group=servers\n    NotifyAccess=all\n    Restart=always\n    \n    ExecStart=/usr/bin/screen -DmS launchserver /usr/bin/java -Xmx128M -javaagent:LaunchServer.jar -jar LaunchServer.jar\n    ExecStop=/usr/bin/screen -p 0 -S launchserver -X eval 'stuff \"stop\"\\015'\n    [Install]\n    WantedBy=multi-user.target\n    ")])]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"ini"},[e._v("\n    [Unit]\n    Description=Minecraft HiTech Server\n    After=network.target\n    After=LaunchServer.service\n    [Service]\n    WorkingDirectory=/home/hitech/\n    \n    User=hitech\n    Group=servers\n    \n    Restart=always\n    \n    ExecStart=/home/hitech/start.sh\n    ExecStop=/usr/bin/screen -p 0 -S hitech -X eval 'stuff \"stop\"\\015'\n    [Install]\n    WantedBy=multi-user.target\n    ")])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("b",[this._v("GravitLauncher - профессиональный лаунчер Minecraft с лучшей защитой")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("details",[n("summary",{attrs:{tabindex:"1"}},[e._v("Устанавливаем лаунчсервер")]),e._v(" "),n("h3",[e._v("Вариант 1: Скрипт установки "),n("div",{staticClass:"gtag gtag-easy"},[e._v("Самый простой вариант")]),e._v(" "),n("div",{staticClass:"gtag gtag-info"},[e._v("Рекомендуется")])]),e._v(" "),n("p",[e._v("Для установки лаунчера версии 5.1.3+ можно воспользоваться скриптом. Доступные на данный момент скрипты\n          находятся "),n("a",{attrs:{href:"https://mirror.gravit.pro/scripts"}},[e._v("тут")]),e._v(".")]),e._v(" "),n("ol",[n("li",[n("b",[e._v("dev")]),e._v(" - самая последняя версия, менее или более стабильная чем master. Доступны новейшие возможности,\n            возможны проблемы")]),e._v(" "),n("li",[n("b",[e._v("master")]),e._v(" - последний доступный релиз. Wiki всегда основана именно на этой ветке")])]),e._v(" "),n("p",[e._v("Для установки лаунчсервера на Linux перейдите в папку, в которой у вас будет находиться лаунчсервер и\n          выполните следующие команды:")]),e._v(" "),n("ol",[n("li",[n("span",{staticClass:"codes"},[e._v("curl -o setup.sh https://mirror.gravit.pro/scripts/setup-ВЕРСИЯ.sh")]),e._v(".")]),e._v(" "),n("li",[e._v("(ОПЦИОНАЛЬНО) Выполните "),n("span",{staticClass:"codes"},[e._v("cat setup.sh")]),e._v(" и убедитесь, что скрипт скачан без ошибок.\n          ")]),e._v(" "),n("li",[e._v("Выполните "),n("span",{staticClass:"codes"},[e._v("chmod +x setup.sh")]),e._v(" что бы выдать права на выполнение")]),e._v(" "),n("li",[e._v("И наконец запустите скрипт "),n("span",{staticClass:"codes"},[e._v("./setup.sh")])]),e._v(" "),n("li",[e._v("Если всё прошло успешно последним сообщением будет: "),n("span",{staticClass:"codes"},[e._v("NOT DELETE DIRECTORIES src AND\n              srcRuntime")])]),e._v(" "),n("li",[e._v("Если что то пошло не так на фазе проверки(фаза 0) - исправьте проблему и запустите скрипт снова."),n("br"),e._v("\n            Если что то пошло не так на другой фазе - вам нужно будет исправить проблему, удалить созданные скриптом\n            файлы и папки и заного запустить скрипт")])]),e._v(" "),n("p",[e._v("При установке на Windows можно воспользоваться Cygwin или другим методом установки")]),e._v(" "),n("h4",[e._v("Требования для успешной установки лаунчсервера скриптом "),n("div",{staticClass:"gtag gtag-important"},[e._v("Важно")])]),e._v(" "),n("ul",[n("li",[e._v("При выборе ОС выбирайте самые последние версии дистрибутивов: Debian 10, Ubuntu 18.04, ArchLinux и другие\n          ")]),e._v(" "),n("li",[e._v("У вас должно быть достаточно оперативной памяти для сборки(хотя бы 600-700Мб свободно), сам лаунчсервер\n            при этом может работать с 300Мб или даже 128Мб. Если у вас машина с малым объемом ОЗУ и скрипт сборки падает\n            из за нехватки памяти можете попробывать включить swap или воспользоваться другими вариантами установки")]),e._v(" "),n("li",[e._v("У вас должен быть установлен OpenJDK 11(и запускаться по умолчанию, т.е. вывод "),n("span",{staticClass:"codes"},[e._v("java\n              -version")]),e._v(" должен выдать OpenJDK 11)")]),e._v(" "),n("li",[e._v("Для работы ProGuard уже после установки лаунчсервера вам понадобится OpenJFX той же версии, что и ваша\n            OpenJDK(11). Иначе собранный лаунчер не запустится с ошибкой AbstractMethodError на JavaFXApplication при\n            включеном ProGuard")]),e._v(" "),n("li",[e._v("У вас должен быть установлен Git и Curl")]),e._v(" "),n("li",[e._v("При возникновении проблем с launch4j:")]),e._v(" "),n("ul",[n("li",[e._v("Убедитесь что у вас нет файла favicon.ico в корне лаунчсервера или он является достоверно валидным")]),e._v(" "),n("li",[e._v("Убедитесь что вы не меняли конфиг launch4j. Неправильное изменение некоторых параметров может привести к\n              такому эффекту")]),e._v(" "),n("li",[e._v("Если у вас 32бит Linux или у вас какие то проблемы с запуском windres попробуйте скачать "),n("a",{attrs:{href:"https://repo1.maven.org/maven2/net/sf/launch4j/launch4j/3.12/launch4j-3.12-workdir-linux.jar"}},[e._v("этот\n                архив с 32битными исполняемыми файлами")]),e._v(" и распаковать в папку libraries/launch4j. При этом для 64бит\n              систем вам нужно будет установить 32битные библиотеки(Debian: lib32z1 | CentOS: glibc.i686 | ArchLinux:\n              lib32-glibc lib32-zlib)")])])]),e._v(" "),n("h4",[e._v("Как пользоваться скриптом после успешной установки лаунчсервера "),n("div",{staticClass:"gtag gtag-important"},[e._v("Важно")])]),e._v(" "),n("p",[e._v("Скрипт экономит много времени и делает за вас большую часть работы. Вам "),n("b",[e._v("не нужно")]),e._v(" следовать инструкции\n          по установке модуля рантайма - скрипт установил его за вас")]),e._v(" "),n("p",[n("i",[e._v("update.sh")]),e._v(" - обновляет лаунчсервер и рантайм до последней версии. При этом перед обновлением ваши\n          изменения скрываются, а после обновления - восстанавливаются. Это позволяет вам обновится без конфликтов с\n          сохранением ваших изменений в дизайне"),n("br"),e._v("\n          Этот метод не заменит полноценной разработке рантайма с использованием Git, но тем не менее является отличным\n          решением для начинающих")]),e._v(" "),n("p",[n("i",[e._v("client.sh ClientName")]),e._v(" - после скачки клиента через downloadClient вы можете воспользоваться этим\n          скриптом что бы скопировать authlib и launchwrapper в папку с клиентом. ClientName - имя папки клиента в\n          updates")]),e._v(" "),n("p",[n("i",[e._v("start.sh")]),e._v(" - Запуск лаунчсервера без использования screen. Рекомендуется для тестирования и начальной\n          настройки")]),e._v(" "),n("p",[n("i",[e._v("startscreen.sh")]),e._v(" - Запуск лаунчсервера с использованием screen. Рекомендуется для постоянной работы.\n          "),n("span",{staticClass:"codes"},[e._v("Ctrl + A + D")]),e._v(" - выйти из консоли лаунчсервере не убивая процесс. "),n("span",{staticClass:"codes"},[e._v("screen -x")]),e._v(" - подключится к консоли лаунчсервера."),n("b",[e._v("Следите за тем что бы не запустить\n            случайно два лаунчсервера. Если вы запустите два лаунчсервера одновременно - вы можете получить странные\n            баги на гране здравого смысла и долго искать решение")])]),e._v(" "),n("p",[n("b",[e._v("Так как при установке лаунчсервера скриптом вы используете JDK 11, а майнкрафт(и сервера в том числе)\n            1.12.2 и ниже используют Java 8 вам необходимо поставить еще и Java 8 себе на VDS, при этом изменив прямой\n            вызов java в ваших скриптах старта сервера на путь к java 8-ой версии")])]),e._v(" "),n("p"),e._v(" "),n("h3",[e._v("Вариант 2: Скачивание релиза с GitHub Actions "),n("div",{staticClass:"gtag gtag-easy"},[e._v("Это просто")])]),e._v(" "),n("p",[e._v("Открываем по ссылке "),n("a",{staticClass:"link-animated",attrs:{href:"https://github.com/GravitLauncher/Launcher/actions"}},[e._v("GitHub\n            Actions")]),n("br"),e._v("\n          Выбираем ветку нажав на "),n("span",{staticClass:"codes"},[e._v("Branch")]),e._v(" и выбрав в открывшемся меню нужную ветку"),n("br"),e._v("\n          Открываем самый последний билд и в разделе Artifacts вы увидите архив с готовыми .jar. Скачиваем его,\n          распаковываем LaunchServer.jar и librzries.zip"),n("br"),e._v(" "),n("b",[e._v("Ни в коем случае не распаковывайте всю папку modules сразу! Модули требуют дополнительной конфигурации и\n            ставятся в разные папки. При необходимости берите из архива модули по одному и следуйте инструкции по их\n            установке")]),n("br"),e._v("\n          Распакуйте архив libraries.zip в папку с лаунчсервером")]),e._v(" "),n("b",[e._v("Если вы не можете скачать файлы с GitHub Actions войдите/зарегистрируйтесь на GitHub либо скачайте из раздела\n          релизов")]),e._v(" "),n("p",[e._v("Следуем дальнейшем инструкциям на Wiki по настройке. Используя этот способ вам нужно устанавливать модуль\n          рантайма самостоятельно")]),e._v(" "),n("h3",[e._v("Вариант 3: Сборка из исходников "),n("div",{staticClass:"gtag gtag-medium"},[e._v("Средний уровень")])]),e._v(" "),n("p",[e._v("Для сборки вам потребуется: JDK, JavaFX библиотеки той же версии что и JDK, Git или wget/curl + unzip")]),e._v(" "),n("h4",[e._v("Способ с Git")]),e._v(" "),n("b",[e._v(" Необходимо установить "),n("a",{staticClass:"link-animated",attrs:{href:"https://git-scm.com/downloads"}},[e._v("Git")])]),n("br"),e._v(" "),n("ol",[n("li",[e._v("Открываем "),n("b",[e._v("cmd")]),e._v(" или "),n("b",[e._v("терминал")])]),e._v(" "),n("li",[e._v("Выполняем "),n("span",{staticClass:"codes"},[e._v("git clone https://github.com/GravitLauncher/Launcher.git")])]),e._v(" "),n("b",[e._v("Обязательно выполните "),n("span",{staticClass:"codes"},[e._v("git submodule update --init")]),n("br")]),e._v("\n          Если у вас не настроены SSH ключи для доступа к GitHub вам нужно изменить в файле .gitmodules\n          "),n("span",[e._v("git@github.com:")]),e._v(" на "),n("span",[e._v("https://github.com/")]),e._v(" "),n("li",[e._v("Устанавливаем "),n("a",{staticClass:"link-animated",attrs:{href:"https://www.oracle.com/technetwork/java/javase/downloads/2133151"}},[e._v("JDK")])]),e._v(" "),n("li",[e._v("Открываем в консоли папку с исходниками и выполняем "),n("span",{staticClass:"codes"},[e._v("gradlew.bat build")]),e._v(" (Windows)\n            "),n("span",{staticClass:"codes"},[e._v("sh gradlew build")]),e._v(" (Linux)")]),e._v(" "),n("li",[e._v("Готовый результат появится в "),n("span",{staticClass:"codes"},[e._v("LaunchServer/build/libs")]),e._v(". Туда же будут скопированы\n            все необходимые библиотеки")]),e._v(" "),n("li",[e._v("Запускаем лаунчсервер командой "),n("span",{staticClass:"codes"},[e._v("java -javaagent:LaunchServer.jar -jar\n              LaunchServer.jar")])])]),e._v(" "),n("h4",[e._v("Cкачивание вручную")]),e._v(" "),n("ol",[n("li",[e._v("Открываем репозиторий на "),n("a",{staticClass:"link-animated",attrs:{href:"https://github.com/GravitLauncher/Launcher"}},[e._v("GitHub")]),e._v(", жмем Clone or Download,\n            и по желанию скачиваем "),n("a",{staticClass:"link-animated",attrs:{href:"https://github.com/GravitLauncher/Launcher"}},[e._v("модули")])]),e._v(" "),n("li",[e._v("Распаковываем "),n("b",[e._v("Launcher-master.zip")]),e._v(", заходим в распакованную папку. Распаковываем тут, по желанию,\n            "),n("b",[e._v("модули")])]),e._v(" "),n("li",[e._v("Открываем в "),n("b",[e._v("cmd")]),e._v(" или "),n("b",[e._v("терминале")]),e._v(" папку с исходными кодами, пользуясь командами "),n("b",[e._v("cd\n              (папка)")]),e._v(" и "),n("b",[e._v("ls")]),e._v(" (Linux) "),n("b",[e._v("dir")]),e._v(" (Windows)")]),e._v(" "),n("li",[e._v("Устанавливаем "),n("a",{staticClass:"link-animated",attrs:{href:"https://www.oracle.com/technetwork/java/javase/downloads/2133151"}},[e._v("JDK")])]),e._v(" "),n("li",[e._v("Открываем в консоли папку с исходниками и выполняем "),n("span",{staticClass:"codes"},[e._v("gradlew.bat build")]),e._v(" (Windows)\n            "),n("span",{staticClass:"codes"},[e._v("sh gradlew build")]),e._v(" (Linux)")]),e._v(" "),n("li",[e._v("Готовый результат появится в "),n("span",{staticClass:"codes"},[e._v("LaunchServer/build/libs")]),e._v(". Туда же будут скопированы\n            все необходимые библиотеки")])]),e._v(" "),n("p",[e._v("Следуем дальнейшем инструкциям на Wiki по настройке. Используя этот способ вам нужно устанавливать модуль\n          рантайма самостоятельно")]),e._v(" "),n("h3",[e._v("Вариант 4: Скачивание релиза с GitLab Pipelines "),n("div",{staticClass:"gtag gtag-deprecated"},[e._v("Только для 5.1.2 и ниже\n          ")])]),e._v(" "),n("p",[e._v("Скачиваем последний релиз с "),n("a",{staticClass:"link-animated",attrs:{href:"https://gitlab.com/gravitlauncherteam/Launcher/pipelines"}},[e._v("GitLab")]),n("br"),e._v("\n          Он выглядит так: "),n("br"),e._v(" "),n("img",{attrs:{src:"https://cdn.discordapp.com/attachments/612736409677070338/635566914189393940/v.png"}}),n("br"),e._v("\n          (С пометкой latest, а так же ветка должна быть "),n("b",[e._v("master")]),e._v(")"),n("br"),e._v("\n          Так же встречаются ветки hotfix/X.X.X, если они первее master'а - используйте их"),n("br"),e._v("\n          Распаковываем в нужную папку")]),e._v(" "),n("p",[e._v("Запускаем лаунчсервер командой "),n("span",{staticClass:"codes"},[e._v("java -javaagent:LaunchServer.jar -jar\n            LaunchServer.jar")])])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("details",[n("summary",{attrs:{tabindex:"2"}},[e._v("Устанавливаем рантайм")]),e._v(" "),n("h2",[n("a",{attrs:{name:"runtime_guide"}}),e._v("Сборка лаунчера на 5.1.0+ "),n("div",{staticClass:"gtag gtag-important"},[e._v("Важно")])]),e._v(" "),n("p",[e._v('Если вы соберете лаунчер командой build сразу после настройки лаунчсервера - вы можете получить ошибку "GUI\n          часть лаунчера не найдена"')]),e._v(" "),n("p",[e._v("Это происходит потому, что начиная с 5.1.0 рантайм(GUI часть лаунчера) отделена от самого лаунчера и\n          находится в отдельном репозитории."),n("br"),e._v(" "),n("b",[e._v("Ссылка на репозиторий рантайма")]),e._v(": "),n("a",{attrs:{href:"https://github.com/GravitLauncher/LauncherRuntime"}},[e._v("GitHub")]),n("br")]),n("p",[n("b",[e._v("Для ветки dev лаунчсервера используется ветка dev рантайма. Для ветки master лаунчесрвера используется\n            ветка master рантайма")])]),e._v(" "),n("b",[e._v("Ссылка на CI рантайма")]),e._v(": "),n("a",{attrs:{href:"https://github.com/GravitLauncher/LauncherRuntime/actions"}},[e._v("GitHub\n          Actions")]),n("br"),e._v(" "),n("b",[e._v("Если вы не можете скачать файлы с GitHub Actions войдите/зарегистрируйтесь на GitHub либо скачайте из раздела\n          релизов")]),n("br"),e._v("\n        Инструкция по установке нового рантайма:"),n("p"),e._v(" "),n("ol",[n("li",[e._v("Скачайте последний билд рантайма с GitHub actions или GitHub releases по ссылкам выше. Вы должны получить\n            runtime.zip, содержащий дизайн и локализацию(fxml/css/png/runtime_**.properties) и JavaRuntime-xxxx.jar,\n            содержащий код отображения этого дизайна и взаимодействия с пользователем.")]),e._v(" "),n("li",[e._v("Скопируйте содержимое архива runtime.zip с css/fxml/png в папку runtime лаунчсервера")]),e._v(" "),n("li",[e._v("Установите модуль LauncherModuleLoader_module на лаунчсервер в папку modules ("),n("b",[e._v("только для версий от\n              5.1.0 до 5.1.3")]),e._v(", на версиях 5.1.4+ этот модуль встроен)")]),e._v(" "),n("li",[e._v("Скопируйте файл JavaRuntime-xxxx.jar в папку launcher-modules(если её нет - создайте)")]),e._v(" "),n("li",[e._v("Перезапустите лаунчсервер и пропишите build")]),e._v(" "),n("li",[e._v("Убедитесь, что сборка прошла без ошибок и лаунчер успешно запускается и отображает GUI")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Запускаем лаунчсервер командой "),t("span",{staticClass:"codes"},[this._v("java -javaagent:LaunchServer.jar -jar LaunchServer.jar")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",[this._v("Рекомендуемые настройки безопасности для проектов "),t("div",{staticClass:"gtag gtag-important"},[this._v("Важно")]),this._v(" "),t("div",{staticClass:"gtag gtag-info"},[this._v("Знать всем")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[e._v("Рекомендуется выделить лаунчсерверу отдельного пользователя и папку в "),n("span",{staticClass:"codes"},[e._v("/home")])]),e._v(" "),n("li",[e._v("Права на папку должны быть "),n("b",[e._v("755")]),e._v(", на private.key, LaunchServer.json и прочие конфигурации "),n("b",[e._v("640")]),e._v(" или\n      "),n("b",[e._v("600")])]),e._v(" "),n("li",[e._v("Рекомендуется использовать "),n("span",{staticClass:"codes"},[e._v("screen")]),e._v(" для удобного контроля за работой лаунчсервера")]),e._v(" "),n("li",[e._v("Рекомендуется использовать systemd для автоматического рестарта, контроля за потреблением памяти и автозапуска\n      при перезапуске VDS")]),e._v(" "),n("li",[e._v("Прописывать какому либо из файлов лаунчера или библиотек права 777 строго запрещается")]),e._v(" "),n("li",[e._v("Крайне аккуратно пользуйтесь параметром "),n("b",[e._v("updateExclusions")]),e._v(". Если вы пишите что то вида "),n("span",{staticClass:"codes"},[e._v('"mods/railcraft"')]),e._v(' то это означает "игнорировать всё что начинается с railcraft в папке mods,\n      в том числе railcraft_SuperMegaCheat.jar". Для игнорирования папки railcraft в mods вы должны прописать\n      "mods/railcraft/"(при этом событие создания папки всё равно будет "mods/railcraft", следовательно вам нужно на\n      сервере в папке вашего клиента самим создать папку railcraft).'),n("b",[e._v("Единственное оправданное приминение\n        updateExclusions - это если в папке находятся динамично изменяющиеся "),n("u",[e._v("неисполняемые")]),e._v(" данные, так к примеру\n        поступает VoxelMap")]),e._v(". Наличие в игнорируемых папках любых .jar файлов недопустимо с точки зрения безопастности\n    ")]),e._v(" "),n("li",[e._v("Крайне рекомендуется использовать проксирование nginx с SSL сертификатом(можно от CloudFlare, можно от Let's\n      Encrypt или любой другой валидный сертификат) и правильно настроить iptables, закрыв порты, которые не должны быть\n      открыты в сеть")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Начиная с версии 5.0.0 в лаунчере появилась консоль, которую можно открыть после авторизации, нажав справа на\n    значок консоли."),t("br"),this._v("\n    В этой консоли можно выполнять команды, недоступные из GUI. По умолчанию консоль заблокирована. Для её разблокировки\n    используется команда "),t("span",[this._v("unlock [key]")]),t("br"),this._v("\n    Ключ находится в RuntimeLaunchServerConfig.json, поле oemUnlockKey"),t("br"),this._v("\n    После разблокировки консоли, вы получите доступ к командам, недоступным ранее, в том числе возможность удаленно\n    управлять лаунчсервером (при наличии прав)"),t("br"),this._v("\n    Что бы удаленно управлять лаунчсервером, ваш аккаунт должен иметь право canAdmin"),t("br")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",[this._v("Интеграция с systemd "),t("div",{staticClass:"gtag gtag-medium"},[this._v("Средний уровень")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Systemd - стандарт в мире дистрибутивов Linux. Ниже привожу .service файлы для лаунчсервера и сервера\n    Minecraft."),t("br"),this._v("\n    Для правильного порядка загрузки с systemd требуется установить модуль SystemdNotify")])}]},_=n("VU/8")(null,v,!1,null,null,null).exports,l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wiki"},[n("h2",[e._v("Настройка AuthProvider")]),e._v(" "),e._m(0),e._v(" "),n("p",[e._v("Принимает любые пары логин-пароль")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n    "auth": [\n      {\n        "provider": {\n          "type": "accept"\n        }\n      }\n    ]\n    ')])]),e._v(" "),e._m(1),e._v(" "),n("p",[e._v("Отклоняет любые пары логин-пароль")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n    "auth": [\n      {\n        "provider": {\n          "type": "reject",\n          "message": "Ведутся технические работы, приходите позже" // cообщение при авторизации\n        }\n      }\n    ]\n    ')])]),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),n("b",[e._v("В базе данных создайте поле permissions типа BIGINT(значение по умолчанию 0)")]),n("p"),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n    "auth": [\n      {\n        "provider": {\n          "type": "mysql",\n          "mySQLHolder": {\n            "address": "localhost",               // адрес mysql сервера\n            "port": 3306,                         // порт mysql сервера\n            "username": "launchserver",           // имя пользователя\n            "password": "password",               // пароль пользователя\n            "database": "db",                     // база данных, при проблемах с timezone используйте "database": "db?serverTimezone=UTC"\n            "timezone": "UTC"                     // установка клиентской таймзоны\n          },\n          "query": "SELECT login, permission FROM users WHERE login=? AND password=MD5(?) LIMIT 1", // sql запрос\n          "queryParams": [ "%login%", "%password%" ],                                               // параметры sql запроса\n          "usePermission": true,\n          "message": "Пароль неверный!"                                                             // сообщение при неверном пароле\n        }\n      }\n    ]\n    ')])]),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),n("b",[e._v("В базе данных создайте поле permissions типа bigint(значение по умолчанию 0)")]),n("p"),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n    "auth": [\n      {\n        "provider": {\n          "type": "postgresql",\n          "postgreSQLHolder": {\n            "address": "localhost",               // адрес postgresql сервера\n            "port": 3306,                         // порт postgresql сервера\n            "username": "launchserver",           // имя пользователя\n            "password": "password",               // пароль пользователя\n            "database": "db",                     // база данных, при проблемах с timezone используйте "database": "db?serverTimezone=UTC" (?)\n            "timezone": "UTC"                     // установка клиентской таймзоны\n          },\n          "query": "SELECT login, permission FROM users WHERE login=? AND password=MD5(?) LIMIT 1", // sql запрос\n          "queryParams": [ "%login%", "%password%" ],                                               // параметры sql запроса\n          "usePermission": true,\n          "message": "Пароль неверный!"                                                             // сообщение при неверном пароле\n        }\n      }\n    ]\n    ')])]),e._v(" "),e._m(6),e._v(" "),n("p",[e._v("Для проверки логина и пароля лаунчсервер обращается к сайту по протоколу HTTP/HTTPS")]),e._v(" "),n("p",[e._v("Ответ сервера должен выглядеть так: OK:Gravit:0, где Gravit - ваш никнейм, 0 - маска permissions")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n    "auth": [\n      {\n        "provider": {\n          "type": "request",\n          "usePermission": true,\n          "url": "http://gravit.pro/auth.php?username=%login%&password=%password%&ip=%ip%",\n          "response": "OK:(?<username>.+):(?<permissions>.+)"\n        }\n      }\n    ]\n    ')])]),e._v(" "),e._m(7),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n    "auth": [\n      {\n        "provider": {\n          "type": "request",\n          "url": "http://gravit.pro/auth.php?username=%login%&password=%password%&ip=%ip%", // ссылка до скрипта проверки логина-пароля\n          "response": "OK:(?<username>.+)" // маска ответа, если не соответствует, будет выведено сообщение с возвращенным текстом\n        }\n      }\n    ]\n    ')])]),e._v(" "),e._m(8),e._v(" "),n("p",[e._v("Для проверки логина и пароля лаунчсервер обращается к сайту по протоколу HTTP/HTTPS, но в отличии от request делает\n    POST запрос с json данными внутри")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n    "auth": [\n      {\n        "provider": {\n          "type": "json",\n          "url": "http://gravit.pro/auth.php", // ссылка до скрипта проверки логина-пароля\n          "apiKey": "none"                     // секретный ключ, который может проверятся в скрипте, для безопасности\n        }\n      }\n    ]\n    ')])]),e._v("\n  Запрос:"),n("p"),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n    {\n      "username": "admin",\n      "password": "password",\n      "ip": "127.0.0.1",\n      "apiKey": "none"\n    }\n    ')])]),e._v(" "),n("p",[e._v("Ответ:")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n    {\n      "username": "admin",\n      "permissions": 0\n    }\n    ')])]),e._v(" "),n("p",[e._v("Ошибка:")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n    {\n      "error": "Неверный логин или пароль"\n    }\n    ')])]),e._v(" "),e._m(9),e._v(" "),e._m(10),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n    "auth": [\n      {\n        "provider": {\n          "type": "hibernate"\n        }\n      }\n    ]\n    ')])]),e._v(" "),e._m(11),e._v(" "),e._m(12),e._v(" "),e._m(13),e._v(" "),n("p",[e._v("Проверка в лаунчере выполняется путем выполнения побитового И, например если для опционального мода требуется право\n    9(canUSR2+canAdmin) то подойдут 9, 11, 13, 15 и тд")])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[this._v("Способ accept "),t("div",{staticClass:"gtag gtag-easy"},[this._v("Только для ознакомления")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[this._v("Способ reject "),t("div",{staticClass:"gtag gtag-easy"},[this._v("Это просто")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[this._v("Способ mysql "),t("div",{staticClass:"gtag gtag-easy"},[this._v("Это просто")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Для проверки логина и пароля лаунчсервер обращается к базе данных mysql"),t("br"),this._v(" "),t("b",[this._v("Этот способ НЕ подходит для сайтов с нестандартными алгоритмами хеширования")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[this._v("Способ postgresql "),t("div",{staticClass:"gtag gtag-medium"},[this._v("Средний уровень")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Для проверки логина и пароля лаунчсервер обращается к базе данных postgresql"),t("br"),this._v(" "),t("b",[this._v("Этот способ НЕ подходит для сайтов с нестандартными алгоритмами хеширования")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[this._v("Способ request "),t("div",{staticClass:"gtag gtag-easy"},[this._v("Это просто")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Некоторые скрипты авторизации не поддерживают передачу permissions и их ответ выглядит как OK:Gravit, где Gravit -\n    ваш никнейм"),t("br"),this._v("\n    Вы можете использовать конфигурацию ниже на версиях до 5.1.0, однако "),t("b",[this._v("рекомендуется найти/написать/подправить\n      скрипт, что бы он передавал permissions")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[this._v("Способ json "),t("div",{staticClass:"gtag gtag-medium"},[this._v("Средний уровень")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[this._v("Способ hibernate "),t("div",{staticClass:"gtag gtag-medium"},[this._v("Средний уровень")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Hibernate — самая популярная реализация спецификации JPA, предназначенная для решения задач объектно-реляционного\n    отображения (ORM)"),t("br"),this._v("\n    Для проверки логина и пароля лаунчсервер обращается к любой базе данных"),t("br"),this._v(" "),t("b",[this._v("Для подключения к базам данных, в libraries необходимо положить библиотеку для поддержки соответствующей базы\n      данных")]),t("br"),this._v(" "),t("a",{attrs:{href:"index.php?r=wiki/page&page=hibernate"}},[this._v("Инструкция по настройке Hibernate")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",[this._v("Permissions. Маска "),t("div",{staticClass:"gtag gtag-medium"},[this._v("Средний уровень")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Маска permissions представляет собой обычное 64-битное число(long в Java/BIGINT в mySQL), каждый бит которого\n    отвечает за определенную привилегию."),t("br"),this._v("\n    Что бы получить право ADMIN+SERVER вы должны сложить(выполнить побитовое ИЛИ если точнее, в простых случаях\n    эквивалентно сложению) числа, соответствующие правам ADMIN и SERVER")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[e._v("Ничего - 0")]),e._v(" "),n("li",[e._v("canAdmin - 1")]),e._v(" "),n("li",[e._v("canServer - 2 (устаревший)")]),e._v(" "),n("li",[e._v("canUSR1 - 4")]),e._v(" "),n("li",[e._v("canUSR2 - 8")]),e._v(" "),n("li",[e._v("canUSR3 - 16")]),e._v(" "),n("li",[e._v("canBot - 32 (устаревший)")])])}]},o=n("VU/8")(null,l,!1,null,null,null).exports,c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wiki"},[n("h2",[e._v("Настройка AuthHandler")]),e._v(" "),e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n    "auth": [\n      "handler": {\n        "type": "memory"\n      }\n    ]\n    ')])]),e._v(" "),e._m(3),e._v(" "),n("p",[e._v("Для получения UUID лаунчсервер обращается к базе данных mysql")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n    "auth": [\n      "handler": {\n        "type": "mysql",\n        "mySQLHolder": {\n          "address": "localhost",              // адрес mysql сервера\n          "port": 3306,                        // порт mysql сервера\n          "username": "launchserver",          // имя пользователя\n          "password": "password",              // пароль пользователя\n          "database": "db?serverTimezone=UTC", // база данных (до ?), после находится установка серверной таймзоны\n          "timezone": "UTC"                    // установка клиентской таймзоны\n        },\n        "table": "users",                      // таблица\n        "uuidColumn": "uuid",                  // название столбца с uuid\n        "usernameColumn": "username",          // название столбца с именами пользователей\n        "accessTokenColumn": "accessToken",    // название столбца с accessToken\n        "serverIDColumn": "serverID"           // название столбца с serverID\n      }\n    ]\n    ')])]),e._v(" "),n("p",[e._v("Для автоматического создания нужных полей в таблице и созданию UUID можно воспользоватся следующими SQL запросами:\n  ")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"sql"},[e._v("\n    -- Добавляет недостающие поля в таблицу\n    ALTER TABLE users\n    ADD COLUMN uuid CHAR(36) UNIQUE DEFAULT NULL,\n    ADD COLUMN accessToken CHAR(32) DEFAULT NULL,\n    ADD COLUMN serverID VARCHAR(41) DEFAULT NULL;\n    \n    -- Создаёт триггер на генерацию UUID для новых пользователей\n    DELIMITER //\n    CREATE TRIGGER setUUID BEFORE INSERT ON users\n    FOR EACH ROW BEGIN\n    IF NEW.uuid IS NULL THEN\n    SET NEW.uuid = UUID();\n    END IF;\n    END; //\n    DELIMITER ;\n    \n    -- Генерирует UUID для уже существующих пользователей\n    UPDATE users SET uuid=(SELECT UUID()) WHERE uuid IS NULL;\n    ")])]),e._v(" "),e._m(4),e._v(" "),n("p",[e._v("Для получения UUID лаунчсервер обращается к базе данных postgresql")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n    "auth": [\n      "handler": {\n        "type": "postgresql",\n        "postgreSQLHolder": {\n          "address": "localhost",              // адрес postgresql сервера\n          "port": 3306,                        // порт postgresql сервера\n          "username": "launchserver",          // имя пользователя\n          "password": "password",              // пароль пользователя\n          "database": "db?serverTimezone=UTC", // база данных (до ?), после находится установка серверной таймзоны\n          "timezone": "UTC"                    // установка клиентской таймзоны\n        },\n        "table": "users",                      // таблица\n        "uuidColumn": "uuid",                  // название столбца с uuid\n        "usernameColumn": "username",          // название столбца с именами пользователей\n        "accessTokenColumn": "accessToken",    // название столбца с accessToken\n        "serverIDColumn": "serverID",           // название столбца с serverID\n        "queryByUUIDSQL": "SELECT uuid, username, NULLIF(\\"accessToken\\", \'\') as \\"accessToken\\", NULLIF(\\"serverID\\", \'\') as \\"serverID\\" FROM users WHERE uuid=? LIMIT 1",\n        "queryByUsernameSQL": "SELECT uuid, username, NULLIF(\\"accessToken\\", \'\') as \\"accessToken\\", NULLIF(\\"serverID\\", \'\') as \\"serverID\\" FROM users WHERE username=? LIMIT 1",\n        "updateAuthSQL": "UPDATE users SET username=?, \\"accessToken\\"=?, \\"serverID\\"=null WHERE uuid=?",\n        "updateServerIDSQL": "UPDATE users SET \\"serverID\\"=? WHERE uuid=?"\n      }\n    ]\n    ')])]),e._v(" "),e._m(5),e._v(" "),e._m(6),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n    "auth": [\n      {\n        "handler": {\n          "type": "request",\n          "usernameFetch": "http://gravit.pro/usernameFetch.php",   // получение uuid:accessToken:serverID по имени пользователя (user)\n          "uuidFetch": "http://gravit.pro/uuidFetch.php",           // получение username:accessToken:serverID по uuid (uuid)\n          "updateAuth": "http://gravit.pro/updateAuth.php",         // скрипт обновления accessToken и uuid по имени пользователя (user, uuid, token)\n          "updateServerID": "http://gravit.pro/updateserverID.php", // скрипт обновления serverID по uuid (serverid, uuid)\n          "splitSymbol": ":",     // символ разделения в uuidFetch и usernameFetch (например: "username:accessToken:serverID") \n          "goodResponse": "OK"    // ответ updateAuth и updateServerID, когда все прошло успешно\n        }\n      }\n    ]\n    ')])]),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n    "auth": [\n      {\n        "handler": {\n          "type": "hibernate"\n        }\n      }\n    ]\n    ')])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("details",[t("summary",{attrs:{tabindex:"1"}},[t("span",[this._v("Question #1")])]),this._v(" "),t("p",[this._v("Answer #1")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[this._v("Способ memory "),t("div",{staticClass:"gtag gtag-easy"},[this._v("Это просто")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("UUID получается путем преобразования бинарного представления ника"),t("br"),this._v("\n    Каждому нику будет соответствовать ровно один UUID")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[this._v("Способ mysql "),t("div",{staticClass:"gtag gtag-easy"},[this._v("Это просто")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[this._v("Способ postgresql "),t("div",{staticClass:"gtag gtag-medium"},[this._v("Средний уровень")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[this._v("Способ request "),t("div",{staticClass:"gtag gtag-medium"},[this._v("Средний уровень")]),this._v(" "),t("div",{staticClass:"gtag gtag-deprecated"},[this._v("Устаревшее")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Для получения и обновления uuid, accessToken, serverID лаунчсервер обращается к сайту по протоколу HTTP/HTTPS"),t("br"),this._v("\n    В скобках указаны параметры запроса")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[this._v("Способ json "),t("div",{staticClass:"gtag gtag-medium"},[this._v("Средний уровень")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[this._v("Способ hibernate "),t("div",{staticClass:"gtag gtag-medium"},[this._v("Средний уровень")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Hibernate — самая популярная реализация спецификации JPA, предназначенная для решения задач объектно-реляционного\n    отображения (ORM)"),t("br"),this._v("\n    Для проверки логина и пароля лаунчсервер обращается к любой базе данных"),t("br"),this._v(" "),t("b",[this._v("Для подключения к базам данных, в libraries необходимо положить библиотеку для поддержки соответствующей базы\n      данных")]),t("br"),this._v(" "),t("a",{attrs:{href:"index.php?r=wiki/page&page=hibernate"}},[this._v("Инструкция по настройке Hibernate")])])}]},h=n("VU/8")(null,c,!1,null,null,null).exports,d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wiki"},[n("h2",[e._v("Базовая настройка защиты")]),e._v(" "),n("ol",[n("li",[n("details",[n("summary",{attrs:{tabindex:"2"}},[e._v("Проксирование через Nginx")]),e._v(" "),n("p",[e._v("Для проксирования можно воспользоваться следующим конфигом nginx")]),e._v(" "),n("p",[e._v("Подходит если у вас нет SSL сертификата или его предоставляет вам CloudFlare")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v("\nserver {\n        listen 80;\n        server_name projectname.ru;\n        location / {\n                root /путь/до/updates;\n        }\n        location /api {\n                proxy_pass http://localhost:9274/api;\n                proxy_set_header Host $host;\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n                proxy_set_header X-Real-IP $remote_addr;\n        }\n}\n")])]),e._v(" "),n("p",[e._v("Подходит если у вас есть SSL сертификат(в том числе от Let's Encrypt)")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v("\n    server {\n        listen 80;\n        listen 443 ssl;\n        server_name projectname.ru;\n        ssl_certificate /путь/до/сертификата.crt;\n        ssl_certificate_key /путь_до/ключа/сертификата.key;\n        location / {\n                root /путь/до/updates;\n        }\n        location /api {\n                proxy_pass http://localhost:9274/api;\n                proxy_set_header Host $host;\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n                proxy_set_header X-Real-IP $remote_addr;\n        }\n}\n")])])])]),e._v(" "),n("li",[n("details",[n("summary",{attrs:{tabindex:"2"}},[e._v("Настройка ProtectHandler")]),e._v(" "),n("p",[e._v("ProtectHandler часть находится в состоянии активной разработки. В дальнейшем будут появлятся всё новые и\n          новые возможности")]),e._v(" "),n("h3",[e._v("Способ none")]),e._v(" "),n("p",[e._v("Полностью отсутствует защита")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n"protectHandler": {\n    "type": "none"\n}\n')])]),e._v(" "),n("h3",[e._v("Способ std (5.1+)")]),e._v(" "),n("p",[e._v("Стандартный protectHandler")]),e._v(" "),e._m(0),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n"protectHandler": {\n    "profileWhitelist": { "Ваш UUID профиля": ["Ник1", "Ник2"] }, //Использование вайтлиста\n    "allowUpdates": [],\n    "type": "std"\n  }\n')])]),e._v(" "),n("h3",[e._v("Способ advanced (5.1.6+) ")]),e._v(" "),n("p",[e._v("Включает в себя все функции std а так же:")]),e._v(" "),e._m(1),e._v(" "),n("p",[e._v("Стандартная конфигурация без hardwareFeature")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n"protectHandler": {\n    "profileWhitelist": { "Ваш UUID профиля": ["Ник1", "Ник2"] }, //Использование вайтлиста\n    "allowUpdates": [],\n    "type": "advanced"\n  }\n')])]),e._v(" "),n("h3",[e._v("Настройка HWIDProvider ( 5.1.6+ )")]),e._v(" "),n("p",[e._v("HWIDProvider является частью advanced protectHandler и позволяет выдавать баны по железу, собирать статистику\n          железа пользователя и отслеживать мультиакки. Конфигурации:")]),e._v(" "),e._m(2),e._v(" "),n("h4",[e._v("Способ memory")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n"protectHandler": {\n    "profileWhitelist": {},\n    "allowUpdates": [],\n    "enableHardwareFeature": true,\n    "provider": {\n        "warningSpoofingLevel": 0.5, // предупреждение в консоль при уровне спуфигна hwid выше указанного значения. Отрицательные значения отключают эту фитчу\n        "criticalCompareLevel": 1.0, // самый важный параметр - уровень совпадения HWID\n        "type": "memory"\n    },\n    "type": "advanced"\n  }\n')])]),e._v(" "),e._m(3),e._v(" "),n("h4",[e._v("Способ mysql")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n"protectHandler": {\n    "profileWhitelist": {},\n    "allowUpdates": [],\n    "enableHardwareFeature": true,\n    "provider": {\n        "warningSpoofingLevel": 0.5, // предупреждение в консоль при уровне спуфигна hwid выше указанного значения. Отрицательные значения отключают эту фитчу\n        "criticalCompareLevel": 1.0, // самый важный параметр - уровень совпадения HWID\n        "mySQLHolder": { //Все параметры аналогичны mySQLHolder из AUthProvider/AuthHandler\n            "address": "localhost", \n            "port": 3306,\n            "username": "launchserver",\n            "password": "xxxxx",\n            "database": "launchserver?serverTimezone=UTC",\n            "timezone": "UTC"\n        },\n        "type": "mysql"\n    },\n    "type": "advanced"\n  }\n')])]),e._v(" "),n("p",[e._v("Выполните следующие SQL запросы что бы создать таблицы для работы mysql hwid provider")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"sql"},[e._v("\nCREATE TABLE `hwidLog` (\n  `id` bigint(20) NOT NULL,\n  `hwidId` bigint(20) NOT NULL,\n  `newPublicKey` blob NOT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\nCREATE TABLE `hwids` (\n  `id` bigint(20) NOT NULL,\n  `publickey` blob,\n  `hwDiskId` varchar(255) DEFAULT NULL,\n  `baseboardSerialNumber` varchar(255) DEFAULT NULL,\n  `displayId` blob,\n  `bitness` int(11) DEFAULT NULL,\n  `totalMemory` bigint(20) DEFAULT NULL,\n  `logicalProcessors` int(11) DEFAULT NULL,\n  `physicalProcessors` int(11) DEFAULT NULL,\n  `processorMaxFreq` bigint(11) DEFAULT NULL,\n  `battery` tinyint(1) NOT NULL DEFAULT '0',\n  `banned` tinyint(1) NOT NULL DEFAULT '0'\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\nALTER TABLE `hwidLog`\n  ADD PRIMARY KEY (`id`),\n  ADD KEY `hwidId` (`hwidId`);\nALTER TABLE `hwids`\n  ADD PRIMARY KEY (`id`),\n  ADD UNIQUE KEY `publickey` (`publickey`(255));\nALTER TABLE `hwidLog`\n  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT;\nALTER TABLE `hwids`\n  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT;\nALTER TABLE `hwidLog`\n  ADD CONSTRAINT `hwidLog_ibfk_1` FOREIGN KEY (`hwidId`) REFERENCES `hwids` (`id`);\n")])])])]),e._v(" "),n("li",[n("details",[n("summary",{attrs:{tabindex:"2"}},[e._v("Подпись лаунчера и EXE")]),e._v(" "),e._m(4),e._v("\n        Вариантов несколько:\n        "),e._m(5),e._v(" "),e._m(6),e._v(" "),e._m(7),n("h3",[e._v("Для формата PKCS12 (рекомендуется)")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n{\n  "key": "/home/myname/MyCert.p12",  // Путь к хранилищу ключей\n  "storepass": "mypassword",         // Пароль от хранилища\n  "algo": "PKCS12",                  // Тип хранилища\n  "keyalias": "gravit code sign",    // Key Alias, см ниже как его узнать\n  "pass": "mypassword",              // Пароль от хранилища, совпадает с storepass\n  "signAlgo": "SHA256WITHRSA"        // При использовании ключей на эллиптический криптографии используйте SHA256withECDSA\n}\n')])]),e._v(" "),n("h4",[e._v("Как узнать key alias из PKCS12 хранилища")]),e._v("\n        Выполните "),n("span",{staticClass:"codes"},[e._v("keytool -storepass ПарольОтХранилища -keystore ПутьКХранилищу -list")]),n("br"),e._v("\n        У вас будет такой вывод"),n("br"),e._v(" "),n("span",{staticClass:"codes"},[e._v("Your keystore contains 1 entry\n          untrusted code sign, 20.10.2019, PrivateKeyEntry,\n        ")]),n("br"),e._v("\n        untrusted code sign - ваш key alias, его вы и должны будете указать"),n("br"),e._v(" "),n("b",[e._v("Утилита keystore поставляется вместе с JDK")]),e._v(" "),n("h3",[e._v("Для JKS(Java KeyStore)")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n{\n  "key": "/home/myname/MyCert.jks",  // Путь к хранилищу ключей\n  "storepass": "mypassword",         // Пароль от хранилища\n  "algo": "JKS",                     // Тип хранилища\n  "keyalias": "gravit code sign ec", // Key Alias, задается при создании\n  "pass": "mypassword",              // Пароль от хранилища, может не совпадать с storepass\n  "signAlgo": "SHA256WITHRSA"        // При использовании ключей на эллиптический криптографии используйте SHA256withECDSA\n}\n')])]),e._v(" "),e._m(8),e._v(" "),n("b",[e._v("Инструкция и скрипты написаны под Linux")]),n("br"),e._v("\n        Перед началом работы с этими скриптами у вас уже должны быть:\n        "),e._m(9),e._v("\n        Если ваш сертификат имеет расширение pfx просто переименуйте его в p12 (это одно и тоже)"),n("br"),e._v("\n        В другом случае конвертируйте свой сертификат в формат p12"),n("br"),e._v(" "),e._m(10),e._v(" "),n("b",[e._v("При каждом билде шаги 3-4 нужно будет повторять заново")]),n("br"),e._v(" "),e._m(11),e._v(" "),e._m(12),e._v(" "),n("b",[e._v("CSR это не сертификат - это запрос на сертификат")]),n("br"),e._v(" "),e._m(13),n("br"),e._v("\n        В терминале:"),n("br"),e._v(" "),n("span",{staticClass:"codes"},[e._v("openssl genrsa -out private.key 4096")]),n("br"),e._v("\n        4096 - это размер приватного ключа в битах. Можно использовать от 1024 бит (небезопасно) до 8192\n        (безопасно)."),n("br"),e._v(" "),n("b",[e._v("Приватный ключ не должен быть скомпрометирован никем, и не должен передаватся по незащищенным каналам\n          связи")]),n("br"),n("br"),e._v(" "),n("b",[e._v("Если вы хотите использовать эллиптические кривые вместо RSA:")]),n("br"),e._v(" "),n("span",{staticClass:"codes"},[e._v("openssl ecparam -name secp256k1 -genkey -out private.key")]),n("br"),e._v("\n        Где secp256k1 - название эллиптической кривой"),n("br"),e._v("\n        Вы можете выбрать любую кривую на свое усмотрение, если понимаете что делаете"),n("br"),e._v("\n        В противом случае рекомендуется оставить всё как есть"),n("br"),n("br"),e._v("\n        Далее:"),n("br"),e._v(" "),n("span",{staticClass:"codes"},[e._v("openssl req -new -key private.key -out cert.csr")]),n("br"),e._v("\n        И отвечаем на вопросы примерно так:\n        "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v("\nCountry Name (2 letter code) [AU]:RU\nState or Province Name (full name) [Some-State]:Russia\nLocality Name (eg, city) []:Moscow\nOrganization Name (eg, company) [Internet Widgits Pty Ltd]:MyProjectName              \nOrganizational Unit Name (eg, section) []:IT\nCommon Name (e.g. server FQDN or YOUR name) []:MyProjectName Code Sign\nEmail Address []:admin@myproject.name\nA challenge password []:\nAn optional company name []:\n")])]),e._v("\n        После чего CSR вы должны отправить тому, кто подпишет вам сертификат своим СА"),n("br"),e._v("\n        После получения сертификата (.pem) соберите его с своим приватным ключем в формат pfx"),n("br"),e._v(" "),n("span",{staticClass:"codes"},[e._v("openssl pkcs12 -export -in MyProjectName_Code_Sign.pem -inkey private.key -out\n          cert.pfx")]),n("br"),e._v("\n        У вас спросят пароль. Если вы хотите дополнительно защитить ваш ключ - можете поставить"),n("br"),e._v("\n        Готовый pfx вы можете использовать для подписи самостоятельно\n        "),n("p"),e._v(" "),e._m(14),e._v(" "),n("p",[e._v("Вы не хотите ни от кого зависить и полностью владеть всей цепочкой сертификатов? Тогда вам сюда. В этом\n          разделе мы создадим базовую цепочку сертификатов с одним СА и одним конечным сертификатом. Этого хватит что бы\n          подписать JAR и EXE лаунчера и пройти проверки")]),e._v(" "),e._m(15),e._v(" "),e._m(16),e._v(" "),n("p",[e._v("Всё! Уже можно пользоваться. Файл **_Root_CA.crt(ваш корневой сертификат) скопируйте в папку truststore\n          лаунчсервера. При желании установите его в ваш ПК как доверенный центр сертификации. А дальше можете\n          настраивать подпись JAR/EXE уже своим сертификатом")]),e._v(" "),e._m(17),e._v(" "),e._m(18),e._v(" "),e._m(19)])]),e._v(" "),e._m(20)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("Токен авторизации можно получить только если authType CLIENT и пройдена проверка хеша лаунчера")]),this._v(" "),t("li",[this._v("Получить и сменить профиль можно только если пройдена проверка на белый список")]),this._v(" "),t("li",[this._v("Получить можно только такие папки updates: assets выбранного клиента, папка выбранного клиента, все папки\n            из allowUpdates")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("Включает механизмы TrustLevel и обмен ключами с клиентом")]),this._v(" "),t("li",[this._v("Включает обработку SecurityReport от нативных защит")]),this._v(" "),t("li",[this._v("Можно включить обработку HardwareInfo и баны по железу")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Настройка HWIDHandler для версий ниже 5.1 находится "),t("a",{attrs:{href:"?r=wiki%2Fpage&page=hwidhandler"}},[this._v("тут")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Используя этот способ вы можете посмотреть собарнные HIWD командой "),t("span",{staticClass:"codes"},[this._v("config protecthandler\n            hardwarelist")]),this._v(". Забанить HWID - "),t("span",{staticClass:"codes"},[this._v("config protecthandler hardwareban [ID]")]),this._v(", где\n          ID вы берете из вывода первой команды")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",[this._v("Где взять сертификат "),t("div",{staticClass:"gtag gtag-medium"},[this._v("Средний уровень")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[e._v("Можно сгенерировать самому себе самоподписанный сертификат(например с помощью GenerateCertificateModule\n            или по инструкциям ниже)")]),e._v(" "),n("li",[e._v("Можно попросить сертификат у того, кто уже настроил грамотно свой СА и может подписывать другие\n            сертификаты (Например maintainer Gravit, активные участники sasha0552, radioegor146 за небольшую сумму (до\n            500 рублей))"),n("br"),e._v("\n            Для этого надо создать CSR, и передать его человеку, который его подпишет (см. инструкцию в конце)")]),e._v(" "),n("li",[e._v("Можно отдавать каждый билд лаунчера человеку, имеющему сертификат, но не являющийся СА, на подпись.\n            (Например активный участник Xaver будет подписывать каждый билд в течении года за 3+ тысяч рублей)")]),e._v(" "),n("li",[e._v("Можно купить сертификат для подписи лаунчера у официальных СА (очень дорого)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",[this._v("Подпись jar "),t("div",{staticClass:"gtag gtag-medium"},[this._v("Средний уровень")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Этот гайд необходим всем тем кто хочет настроить JarSigner module, а так же начиная с 5.1.0 подписывание\n          обязательно."),t("br"),this._v("\n          Перед началом работы, у вас уже должны быть:\n        "),t("ol",[t("li",[this._v("Установлен модуль JarSigner(5.0.11 и ниже) или версия 5.1.0+")]),this._v(" "),t("li",[this._v("Сертификат, полученный одним из способов выше")])]),this._v("\n        Конфигурация:\n        ")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",[this._v("Подпись exe "),t("div",{staticClass:"gtag gtag-hard"},[this._v("Сложный уровень")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[this._v("Установлен osslsigncode"),t("br"),this._v("\n            Debian-подобные системы: sudo apt install osslsigncode")]),this._v(" "),t("li",[this._v("Сертификат")]),this._v(" "),t("li",[t("a",{staticClass:"link-animated",attrs:{href:"https://yadi.sk/d/PAt9gkJyBORXjA"}},[this._v("Скрипты для подписи")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ol",[n("li",[e._v("В папку с скриптами положите ваш Launcher.exe")]),e._v(" "),n("li",[e._v("Выполните "),n("span",{staticClass:"codes"},[e._v("sh sign-update.sh Launcher.exe")]),n("br"),e._v("\n            Будет создан файл signsize.txt, который понадобится на следующем этапе"),n("br"),e._v("\n            Эту процедуру достаточно провести один раз")]),e._v(" "),n("li",[e._v("Выполните "),n("span",{staticClass:"codes"},[e._v("sh sign.sh Launcher.exe")]),n("br"),e._v("\n            У вас в папке со скриптами должен присутствовать signsize.txt"),n("br"),e._v("\n            Если всё прошло успешно, вам покажет информацию о сертификатах внутри exe")]),e._v(" "),n("li",[e._v("Замените ваш Launcher.exe рядом с лаунчсервером подписанной версией, и пропишите "),n("span",{staticClass:"codes"},[e._v("syncBinaries")]),e._v(" в консоли лаунчсервера")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("b",[this._v("При появлении ошибки "),t("span",{staticClass:"codes"},[this._v("Corrupt jar file")]),this._v(" (размер подписи изменился) заново выполните\n          шаги 1-4")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",[this._v("Создание CSR (Certificate Signing Request) для 3 варианта получения сертификата "),t("div",{staticClass:"gtag gtag-medium"},[this._v("Средний уровень")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("b",[this._v("Необходимо установить "),t("a",{staticClass:"link-animated",attrs:{href:"https://www.openssl.org/source/"}},[this._v("OpenSSL")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",[this._v("Создание самоподписаного CodeSign сертификата (минимальная настройка) "),t("div",{staticClass:"gtag gtag-medium"},[this._v("Средний\n            уровень")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Создавать мы будем с помощью утилиты XCA "),t("a",{attrs:{href:"https://github.com/chris2511/xca/releases"}},[this._v("отсюда")]),this._v(".\n          Выбирайте последний релиз, качаете, устанавливаете")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ol",[n("li",[e._v("Создайте базу данных. При создании базы данных обязательно задайте пароль и сохраните/запишите его в\n            безопасное место. Старайтесь придерживаться правил безопастности - это доступ к всем вашим сертификатам.\n          ")]),e._v(" "),n("li",[e._v('Перейдите во вкладку "Сертификаты" и нажмите кнопку "Новый сертификат"')]),e._v(" "),n("li",[e._v('Во вкладке "Субьект" укажите поле commonName - например "SuperCraft Root CA". Рекомендуется ввести имя,\n            заканчивающиеся на "Root CA" - так будет проще и вам, и всем остальным кто будет смотреть ваш сертификат\n          ')]),e._v(" "),n("li",[e._v('В той же вкладке "Субъект" внизу нажмите на кнопку "Сгенерировать новый ключ". Тип ключа - RSA, длинна\n            ключа - 4096 бит. Нажмите "Создать"')]),e._v(" "),n("li",[e._v('В вкладке "Расширения" выберите "тип" - "Центр Сертификации", в графе "Выбор периода" укажите от 1 до 10\n            лет и нажмите кнопку "Применить", после чего дата окончания должна сдвинуться на указанное вами число лет\n          ')]),e._v(" "),n("li",[e._v('В вкладке "Область приминения ключа" в первой колонке укажите "Digitial Signature" и "Certificate Sign",\n            во второй "Code Signing", больше ничего в этой вкладке менять не нужно')]),e._v(" "),n("li",[e._v('В вкладке "Netscape" если что либо написано в поле "Netscape Comment" - уберите')]),e._v(" "),n("li",[e._v('После чего если вы уверены в веденных параметрах можно нажать "ОК". Вы создали корневой сертификат!')]),e._v(" "),n("li",[e._v('Экспортируем корневой сертификат. Для этого выберите свежесозданный сертификат и нажмите кнопку "Экспорт".\n            Формат экспорта - "PEM (.crt)", файл куда экспортировать выберите сами на свое усмотрение. Нажимаете кнопку\n            "ОК"')]),e._v(" "),n("li",[e._v('Далее вам нужно создать конечный сертификат, которым вы будете подписывать лаунчер(JAR и/или EXE).\n            Нажимаете "Новый сертификат"')]),e._v(" "),n("li",[e._v('В Вкладке "Первоисточник" должен быть выбран "Использовать этот сертификат для подписи" где должен быть\n            указан ваш Root CA, созданный на предыдущем этапе')]),e._v(" "),n("li",[e._v('В вкладке "Субъект" укажите поле commonName - например "SuperCraft Code Sign". Рекомендуется ввести имя,\n            заканчивающиеся на "Code Sign" - так будет проще и вам, и всем остальным кто будет смотреть ваш сертификат\n          ')]),e._v(" "),n("li",[e._v('В той же вкладке "Субъект" внизу нажмите на кнопку "Сгенерировать новый ключ". Тип ключа - RSA, длинна\n            ключа - 2048 бит. Нажмите "Создать"')]),e._v(" "),n("li",[e._v('В вкладке "Расширения" выберите "тип" - "Конечный субъект", в графе "Выбор периода" укажите от 1 до 10 лет\n            и нажмите кнопку "Применить", после чего дата окончания должна сдвинуться на указанное вами число лет.\n            Обратите внимание - срок действия конечного сертификата не может быть больше срока действия вашего Root CA.\n            Меньше можно, больше - нет')]),e._v(" "),n("li",[e._v('Все прочие настройки аналогичны. В вкладке "Область приминения ключа" в первой колонке укажите "Digitial\n            Signature"(и не указывайте Certificate Sign), во второй "Code Signing", больше ничего в этой вкладке менять\n            не нужно. В вкладке "Netscape" если что либо написано в поле "Netscape Comment" - уберите. После чего если\n            вы уверены в веденных параметрах можно нажать "ОК"')]),e._v(" "),n("li",[e._v('Вы создали конечный сертификат! Осталось этот сертификат экспортировать. Выберите ваш "Code Sign"\n            сертификат и нажмите кнопку "Экспорт". Формат экспорта - '),n("b",[e._v('"Цепочка PKCS12"')]),e._v(", месторасположение\n            выбирайте сами. Введите пароль, которым будет зашифрован ваш .p12 контейнер. Пароль не должен совпадать с\n            паролем от вашей базы данных, это небезопасно. Именно этот пароль вы будете указывать в конфигурации при\n            подписи")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",[this._v("Создание самоподписаного CA (серьезная настройка) "),t("div",{staticClass:"gtag gtag-hard"},[this._v("Сложный уровень")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Хотите почувствовать себя настоящим экспертом? Что бы всё выглядело максимально правдоподобно и серьезно?\n          Хотите не только подписывать JAR/EXE, а вообще что угодно где используются сертификаты? Тогда вам сюда. Вам\n          понадобится всё тот же XCA "),t("a",{attrs:{href:"https://github.com/chris2511/xca/releases"}},[this._v("отсюда")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ol",[n("li",[e._v('Начнем с самого важного - ключа вашего центрального Root CA сертификата. Создайте базу данных XCA прямо на\n            флешке и сгенерируйте ключ RSA с длинной не менее 4096 бит. После чего приступайте к созданию Root CA\n            сертификата. В разделе "Субъект" укажите все основные параметры, исключая emailAddress, что бы всё выглядело\n            серьезно. На дополнительные параметры можно забить в этой вкладке, они не нужны. В разделе "Расширения"\n            укажите тип - "Центр сертификации", срок действия минимум 5 лет. "Область приминения ключа" - "Certificate\n            Sign" и "CRL Sign", всё остальное без изменений. В разделе "Netscape" всё можно оставить пустым')]),e._v(" "),n("li",[e._v('Дальше создайте в той же базе данных "дополнительный" CA с настройками как у Root CA, а в имени либо\n            номер, либо год. Единственное отличие в "Расширения" в поле "X.509v3 CRL" укажите URL на ваш сайт, где будет\n            находится центральный CRL(например https://ca.example.com/root.crl). Этот СА вы будете использовать вместо\n            центрального Root CA для создания других сертификатов. После чего экспортируйте ключ и сам сертификат\n            дополнительного СА а так же только сертификат Root CA. Ключ Root CA не должен покидать пределы флешки.\n            Дальше я для удобства будут называть этот CA - "2020 CA"')]),e._v(" "),n("li",[e._v("Создайте CRL root.crl используя ваш Root CA(ПКМ->ЦС->Сгенерировать CRL) и экспортируйте его. Потом вы его\n            зальете себе на сайт по тому URL что указали выше, когда генерировали 2020 CA")]),e._v(" "),n("li",[e._v("Сохраните эту базу данных на еще одну флешку, CD диск, что угодно что будет не подключено к вашему ПК\n            физически(а значит и ключ Root CA будет в безопастности) и что внезапно сразу не сломается")]),e._v(" "),n("li",[e._v("Создайте новю базу данных уже в другом месте(к примеру на вашем жестком диске) куда импортируйте\n            сертификат Root CA, сертификат 2020 CA и ключ 2020 CA. Дальше вы будете работать только с этой базой.")]),e._v(" "),n("li",[e._v('Создайте CA, который будет служить определенной цели, например "Code Sign RSA CA", указав в качестве CRL\n            что то вроде https://ca.example.com/2020.crl . Все CA, созданные с помощью 2020 CA будут использовать этот\n            CRL URL. Есстественно заполняя все необходимые поля')]),e._v(" "),n("li",[e._v("Сгенерируйте CRL для 2020 CA(https://ca.example.com/2020.crl) и всех специализированных\n            CA(https://ca.example.com/2020/codesign.crl). Потом вы зальете их на сайт по тому URL что указали")]),e._v(" "),n("li",[e._v("И вот теперь можете создавать конечные сертификаты. Бывает нужно указать какой то особый OID, которого нет\n            в GUI. Тогда вы идете в Дополнительно->Редактировать и там вы можете указать любые параметры, которые можно\n            указать в конфигурации OpenSSL. К примеру добавить кастомные extendedKeyUsage")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("details",[t("summary",{attrs:{tabindex:"2"}},[this._v("Проксирование через Nginx")])])])}]},u=n("VU/8")(null,d,!1,null,null,null).exports,p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wiki"},[e._m(0),e._v(" "),n("p",[e._v("Для уже готового клиента, скачанного с зеркала выполните:")]),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),n("ul",[n("li",[e._v("Добавьте путь к библиотекам guava и jimfs в altClassPath. Например:\n      "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n"altClassPath": [\n  "libraries/com/google/jimfs/jimfs/1.1/jimfs-1.1.jar",\n  "libraries/com/google/guava/guava/21.0/guava-21.0.jar"\n]')])]),e._v(" "),n("p",[e._v("Объяснение: jimfs использует технологию сервисов(ServiceLoader) и требует, что бы он был загружен системным\n        загрузчиком классов(SystemClassLoader), в противном случае JVM не сможет правильно зарегистрировать обработчик\n        URL'ов jimfs")])])]),e._v(" "),e._m(5),e._v(" "),e._m(6),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n{\n  "version": "1.12.2", //Версия клиента\n  "assetIndex": "1.12.2",\n  "dir": "HiTech", //Папка клиента в updates\n  "assetDir": "asset1.12", //Папка ассетов в updates\n  "sortIndex": 0, //Индекс сортировки. В версиях до 5.1.0 у всех профилей должен быть различный индекс для корреткной работы опциональных модов\n  "uuid": "d893746b-21be-4aa4-b62f-20800d4786bc", //UUID клиента\n  "title": "XXX", //Заголовок клиента, отображаемый пользователю\n  "info": "Информация о сервере", //Информация о сервере, отображаемая пользователю\n  "serverAddress": "localhost", //Адрес майнкрафт сервера, к которому лаунчер будет обращаться за текущим онлайном\n  "serverPort": 25565, //Порт майнкрафт сервера, к которому лаунчер будет обращаться за текущим онлайном\n  "update": [ //Файлы и папки, которые нужно обновлять при запуске клиента\n    "servers.dat"\n  ],\n  "updateExclusions": [ //Исключения для update и updateVerify(см предупреждение на главной странице Wiki по использованию этого параметра)\n  ],\n  "updateShared": [], //Не используется\n  "updateVerify": [ //Файлы и папки, которые не должны меняться при работе клиента(более строгая версия update)\n    "libraries",\n    "natives",\n    "mods",\n    "minecraft.jar",\n    "forge.jar",\n    "liteloader.jar"\n  ],\n  "updateOptional": [], //Опциональные моды, см ниже отдельный раздел\n  "updateFastCheck": true, //Проверка только размеров, без сравнения хешей\n  "mainClass": "net.minecraft.launchwrapper.Launch", //Main Class клиента\n  "jvmArgs": [ //Аргументы JVM\n    "-Dfml.ignorePatchDiscrepancies\\u003dtrue",\n    "-Dfml.ignoreInvalidMinecraftCertificates\\u003dtrue",\n    "-XX:+UseConcMarkSweepGC",\n    "-XX:+CMSIncrementalMode",\n    "-XX:-UseAdaptiveSizePolicy",\n    "-Xmn128M",\n    "-XX:+DisableAttachMechanism"\n  ],\n  "classPath": [ //Class Path клиента. Указание папки в этом разделе равносильно добавлению всех .jar файлов в этой папке\n    "forge.jar",\n    "liteloader.jar",\n    "minecraft.jar",\n    "libraries"\n  ],\n  "altClassPath": [], //альтернативный ClassPath. Указанные здесь файлы будут загружены другим, отличным от classLoaderConfig загрузчиком классов(как правило SystemClassLoader). Используется только некоторыми клиентами\n  "clientArgs": [ //Аргументы клиента\n    "--tweakClass",\n    "net.minecraftforge.fml.common.launcher.FMLTweaker",\n    "--tweakClass",\n    "com.mumfrey.liteloader.launch.LiteLoaderTweaker"\n  ],\n  "securityManagerConfig": "CLIENT", //Используемый SecurityManager для клиента\n  "classLoaderConfig": "LAUNCHER" //Используемый тип класслоадера для клиента\n}\n')])]),e._v(" "),e._m(7),e._v(" "),n("p",[e._v("Опциональные моды позволяют игроку управлять загрузкой определенных модов/classpath/jvmargs")]),e._v(" "),n("p",[e._v("Настройка опциональных модов производится для каждого профиля отдельно")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n"updateOptional": [\n    {\n       "type": "FILE", //Тип опционального мода. Может быть FILE, CLIENTARGS, JVMARGS, CLASSPATH\n       "list": ["mods/1.7.10/NotEnoughItems-1.7.10-1.0.5.118-universal.jar"], //Список файлов или аргументов\n       "info": "Мод, показывающий рецепты", //Описание\n       "visible": true, //Видимость\n       "mark": true, //Включен по умолчанию\n       "permissions": 0, //Маска привилегий. 0 - мод для всех, 1 - только для админов.\n       "name": "NotEnoughItems" //Имя\n    },\n    {\n       "type": "FILE",\n       "list": ["mods/Waila_1.5.10_1.7.10.jar"],\n       "info": "Мод, показывающий дополнительную информацию при наведении на блок",\n       "name": "Walia",\n       "permissions": 0,\n       "visible": true,\n       "dependenciesFile": [{"name":"NotEnoughItems"/* Имя зависимого мода */, "type": "FILE" /* Тип зависимого мода */}],\n       "conflictFile": [{"name":"ClientFixer"/* Имя конфликтующего мода */, "type": "FILE" /* Тип конфликтующего мода */}],\n       "subTreeLevel": 2  //Смещение относительно первого мода. Используется для создания визуального отображения дерева зависимостей\n    },\n    {\n       "type": "JVMARGS",\n       "list": ["--add-modules", "jdk.unsupported"],\n       "triggers": [{"type": "JAVA_VERSION", "compareMode": 1, "need": true, "value": 8}], //Триггеры, о них ниже\n       "info": "Аргументы Java9+",\n       "visible": false,\n       "permissions": 0,\n       "name": "Java9Args"\n    },\n    {\n       "type": "FILE",\n       "list": ["mods/1.7.10/OptiFine_1.7.10_HD_U_E7.jar"],\n       "info": "Улучшение производительности",\n       "permissions": 0,\n       "visible": true,\n       "name": "OptiFine HD"\n    }\n  ],\n')])]),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),e._m(10),e._v(" "),n("p",[e._v("Второй параметр - compareMode. Он соответствует одному из трех знаков сравнения")]),e._v(" "),e._m(11),e._v(" "),n("p",[e._v("Третий параметр - value. Это значение, с которым будет сравниваться параметр")]),e._v(" "),n("p",[e._v('Четвертый параметр - need. Это особый флаг, означающий "опциональный мод не может работать если этот триггер не\n    сработал"')]),e._v(" "),n("p",[e._v("Если триггеров с need нет - опциональный мод включится если сработает ХОТЯ БЫ ОДИН триггер")]),e._v(" "),e._m(12),e._v(" "),n("p",[e._v("Примеры тригеров")]),e._v(" "),e._m(13)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h2",[this._v("Сборка клиента на версии 5.1.0+ "),t("div",{staticClass:"gtag gtag-important"},[this._v("Важно")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("Вам необходимо будет скопировать файл authlib-clean.jar отсюда ( "),t("a",{attrs:{href:"https://github.com/GravitLauncher/Launcher/raw/master/compat/authlib/authlib-clean.jar"}},[this._v("master")]),this._v(" ) в\n      папку libraries клиента")]),this._v(" "),t("li",[this._v("Скопируйте из артефактов сборки файл LauncherAuthlib.jar в папку libraries клиента")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Для сборки клиента с "),t("b",[this._v("Forge")]),this._v(" также выполните следущее:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("Скачайте клиентский лаунчвраппер и "),t("b",[this._v("замените")]),this._v(" предыдущий лаунчвраппер в папке librares клиента.("),t("a",{attrs:{href:"https://mirror.gravit.pro/compat/launchwrapper-1.12-5.1.x-clientonly.jar"}},[this._v("ссылка")]),this._v(" на момент\n      публикации)("),t("u",[this._v("только клиент")]),this._v(") Так как launchwrapper может постоянно фиксится под 5.1.0 следите за discord\n      сервером")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Для сборки клиента с "),t("b",[this._v("Fabric")]),this._v(" выполните следущее:")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("details",[n("summary",{attrs:{tabindex:"2"}},[e._v("Подпись всего клиента "),n("div",{staticClass:"gtag gtag-hard"},[e._v("Сложный уровень")])]),e._v(" "),n("h3",[e._v("Подпись всего клиента "),n("div",{staticClass:"gtag gtag-hard"},[e._v("Сложный уровень")])]),e._v(" "),n("p",[e._v("Начиная с 5.1.0 появилась возможность подписывать не только лаунчер, а весь клиент целиком. Подпись всего клиента\n      осуществляется командой signdir и доступна только если у вас настроен свой сертификат(автосгенерированный не\n      подойдет). Перед началом подписи убедитесь что вы настроили раздел sign Лаунчсервера")]),e._v(" "),n("ol",[n("li",[e._v("Сделайте бекап клиента")]),e._v(" "),n("li",[e._v("Подготовьте клиент к подписи. Удалите из forge.jar/minecraft.jar/liteloader.jar файлы подписи, которые\n        находятся в META-INF и имеют разрешение .SF/.RSA/.EC при их наличии. Так же может понадобится удаление из\n        манифеста всех хешей. Убедитесь, что ничего вы этим действием не сломали")]),e._v(" "),n("li",[e._v("Выполните "),n("span",{staticClass:"codes"},[e._v("signdir updates/ВашКлиент")])]),e._v(" "),n("li",[e._v("Выполните "),n("span",{staticClass:"codes"},[e._v("syncUpdates")])])]),e._v(" "),n("p",[e._v("После каждого обновления модов и любых других .jar файлов вам нужно будет их переподписать командой "),n("span",{staticClass:"codes"},[e._v("signjar updates/ВашКлиент/ПутьКФайлу")]),e._v(". Команда signdir не умеет игнорировать уже подписанные\n      файлы, имейте это ввиду")]),e._v(" "),n("p",[e._v("Подпись клиента - вспомогательное действие, нужное некоторым защитам от читов для нормальной работы")]),e._v(" "),n("h3",[e._v("Наложение патчей на клиент "),n("div",{staticClass:"gtag gtag-hard"},[e._v("Сложный уровень")])]),e._v(" "),n("p",[e._v("Для работы некоторых возможностей лаунчера необходимо, что бы обращения к некоторым вызовам перенаправлялись в\n      лаунчер. Это можно сделать с помощью мультикоманды patcher из UnsafeCommandsPack")]),e._v(" "),n("table",[n("tr",[n("th",[e._v("Исходный класс")]),e._v(" "),n("th",[e._v("Исходный метод")]),e._v(" "),n("th",[e._v("Прокси класс")]),e._v(" "),n("th",[e._v("Прокси метод")])]),e._v(" "),n("tr",[n("td",[e._v("java.lang.System")]),e._v(" "),n("td",[e._v("setSecurityManager")]),e._v(" "),n("td",[e._v("pro.gravit.launcher.api.SystemService")]),e._v(" "),n("td",[e._v("setSecurityManager")])]),e._v(" "),n("tr",[n("td",[e._v("java.lang.System")]),e._v(" "),n("td",[e._v("exit")]),e._v(" "),n("td",[e._v("pro.gravit.launcher.api.SystemService")]),e._v(" "),n("td",[e._v("exit")])])]),e._v(" "),n("p",[e._v("Так как это статические функции то должен использоваться патчер, который работает с опкодом INVOKESTATIC. В\n      данном случае это "),n("span",{staticClass:"codes"},[e._v("pro.gravit.launchermodules.unsafecommands.patcher.StaticReplacerPatcher")]),e._v(". Этот патчер\n      принимает 4 аргумента в том порядке, в котором они указаны в таблице.")]),e._v(" "),n("p",[e._v("Нет смысла пытаться пропатчить все .jar файлы(включая моды) этим патчером. Как правило достаточно патча\n      forge.jar, так как в других файлах(и тем более модах) эти вызовы встречатся не должны. В выборе что патчить\n      руководствуйтесь инструкцией к вашей защите")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[this._v("Конфигурация "),t("div",{staticClass:"gtag gtag-easy"},[this._v("Это просто")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[this._v("Опциональные моды "),t("div",{staticClass:"gtag gtag-easy"},[this._v("Это просто")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[this._v("Триггеры в опциональных модах "),t("div",{staticClass:"gtag gtag-medium"},[this._v("Средний уровень")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Триггеры - условия, при которых опциональный мод будет включен без участия пользователя автоматически."),t("br"),this._v("Первый\n    параметр - type:")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[e._v("JAVA_VERSION - версия Java, с которой запущен лаунчер. Принимает значения 8,9,11 и т.д.")]),e._v(" "),n("li",[e._v("JAVA_BITS - разрядность Java, с которой запущен лаунчер. Принимает значения 32 и 64")]),e._v(" "),n("li",[e._v("OS_BITS - разрядность ОС, с которой запущен лаунчер. Принимает значения 32 и 64")]),e._v(" "),n("li",[e._v("OS_TYPE - тип ОС, с которой запущен лаунчер. Так как значение может быть только числом приняты следующие\n      соответствия ОС-ЧИСЛО:"),n("ul",[n("li",[e._v("0 - Windows(MUSTDIE)")]),e._v(" "),n("li",[e._v("1 - Linux")]),e._v(" "),n("li",[e._v("2 - MacOS")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("0 - знак равенства")]),this._v(" "),t("li",[this._v("Любое положительное число - знак больше(строгий)")]),this._v(" "),t("li",[this._v("Любое отрицательное число - знак меньше(строгий)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Если есть ХОТЬ ОДИН триггер с NEED - опциональный мод включится только если ВСЕ ТРИГГЕРЫ С NEED сработают. При этом\n    если хоть один триггер с need не сработает:\n  "),t("ol",[t("li",[this._v("Если опциональный мод был включен по умолчанию - он будет выключен")]),this._v(" "),t("li",[this._v("Если опциональный мод был видимым по умолчанию - он станет невидимым")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v('{"type": "JAVA_VERSION", "compareMode": 1, "need": true, "value": 8} - выполняется если версия Java > 8')]),this._v(" "),t("li",[this._v('{"type": "OS_TYPE", "compareMode": 0, "need": true, "value": 0} - выполняется если ОС Windows')]),this._v(" "),t("li",[this._v('{"type": "JAVA_BITS", "compareMode": 0, "need": true, "value": 64} - выполняется если Java, с которой запущен\n      лаунчер 64 бит')])])}]};var m=n("VU/8")(null,p,!1,function(e){n("zB57")},null,null).exports,g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wiki"},[n("h2",[e._v("Поддерживаемые ядра серверов")]),e._v(" "),e._m(0),e._v(" "),n("p",[e._v("Непротестированы: Atom и другие")]),e._v(" "),e._m(1),e._v(" "),n("p",[e._v("В 5.0.0 введен новый способ установки ServerWrapper'а - с помощью скрипта установки. Для его запуска выполните:")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v("\n    java -jar ServerWrapper.jar setup\n")])]),e._v(" "),n("p",[e._v("И следуйте инструкции по установке")]),e._v(" "),n("h2",[e._v("Основы привязки лаунчера к серверу")]),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),n("h3",[e._v("Указание Main-Class в строке запуска")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v("\njava -cp ServerWrapper.jar:{ClassPath вашего сервера} pro.gravit.launcher.server.ServerWrapper {ваш MainClass}\n")])]),e._v(" "),n("h3",[e._v("Указание Main-Class в конфигурации")]),e._v(" "),n("p",[e._v("Можно указать Main-Class в ServerWrapperConfig.json , тогда строка запуска будет выглядеть так:")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v("\njava -cp ServerWrapper.jar:{ClassPath вашего сервера} pro.gravit.launcher.server.ServerWrapper\n")])]),e._v(" "),n("h2",[e._v("Конфигурация ServerWrapperConfig.json")]),e._v(" "),n("p",[e._v("Необходимо скопировать public.key из директории лаунчсервера в директорию ServerWrapper")]),e._v(" "),n("p",[e._v("Для успешной авторизации сервера необходимо наличие в базе данных специального аккаунта, от имени которого будет\n    совершен вход")]),e._v(" "),n("p",[e._v("Для 5.0.10 и ниже аккаунт сервера обязан обладать правом canServer, см ниже как прописать права")]),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v('\n{\n  "title": "Action1.12", //Заголовок профиля, к которому привязывается сервер\n  "projectname": "MineCraft", //Название вашего проекта\n  "address": "localhost", //Адрес лаунчсервера(LEGACY)\n  "port": 7240, // Порт лаунчсервера(LEGACY)\n  "reconnectCount": 10, //максимальное число переподключений(LEGACY)\n  "reconnectSleep": 1000, //Время ожидания перед новым подключением(LEGACY)\n  "customClassPath": false, //Указание кастомного classPath в конфигурации\n  "autoloadLibraries": false, //Автозагрузка библиотек из папки librariesDir\n  "stopOnError": true, //Останавливать запуск при возникновении исключения\n  "syncAuth": true, //Синхронность авторизации\n  "mainclass": "org.bukkit.craftbukkit.Main", //Ваш Main-Class\n  "login": "ServerBot", //Логин аккаунта, от имени котого будет совершен вход\n  "password": "1111", //Пароль от аккаунта\n  "auth_id": "std", //Тип авторизации\n  "websocket":\n  {\n    "enabled": true,\n    "address": "ws://localhost:9274/api" //Адрес лаунчсервера\n  },\n  "env": "STD" //Окружение\n}\n')])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Протестированные ядра: Sponge, Thermos, KCaldron, UltraMine, Waterfall/BungeeCoed, Spigot/Bukkit. Некоторые можно\n    скачать тут: "),t("a",{staticClass:"link-animated",attrs:{href:"https://mirror.gravit.pro/servers/"}},[this._v("mirror.gravit.pro")]),t("br")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",[this._v("Скрипт развертывания ServerWrapper "),t("div",{staticClass:"gtag gtag-easy"},[this._v("Это просто")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("b",[this._v("Main-Class")]),this._v(" - точка входа, то с чего начинается выполнение. Его можно найти открыв jar файл ядра и посмотрев\n    содержимое манифеста, либо скопировать из старого скрипта запуска")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("b",[this._v("Class-Path")]),this._v(" - путь, где JVM будет искать классы. Его можно найти открыв jar файл ядра и посмотрев содержимое\n    манифеста, либо скопировать из старого скрипта запуска")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("b",[this._v("Profile title")]),this._v(" - имя профиля клиента, его можно посмотреть открыв в лаунчсервере папку profiles, открыв файл\n    своего профиля и посмотрев на поле title. title в конфигурации ServerWrapper и title в профиле должны совпадать на\n    100%")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("b",[this._v("Аккаунт сервера")]),this._v(" - полноценный аккаунт с логином и паролем, который будет использоватья для авторизации\n    сервера")])}]},f=n("VU/8")(null,g,!1,null,null,null).exports,b={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wiki"},[n("h2",[e._v("Модули "),n("div",{staticClass:"gtag gtag-hard"},[e._v("Программистам")])]),e._v(" "),n("p",[e._v("Этот раздел посвящен разработке модулей на Java")]),e._v(" "),n("p",[e._v("Загрузка модулей происходит из папки modules. Менеджер модулей открывает по очереди все jar и смотрит на параметр\n        Module-Main-Class в манифесте JAR файла.")]),e._v(" "),n("p",[e._v("Класс модуля - это класс, наследуемый от "),n("b",[e._v("pro.gravit.launcher.modules.LauncherModule")]),e._v(" и реализующий метод\n        init(LauncherInitContext initContext)")]),e._v(" "),n("p",[e._v("Реализовывать логику внутри метода init "),n("b",[e._v("запрещенно")]),e._v(". Внутри метода init разрешается обращаться только к\n        методам modulesManager и initContext, при чем при статической загрузке модуля initContext = null, а при\n        динамической загрузке модуля через команду loadModule он будет содержать инстанс контекста, из которого можно\n        получить доступ к LaunchServer")]),e._v(" "),n("h3",[e._v("События(евенты)")]),e._v(" "),n("p",[e._v("Всё что можно сделать из init - загружать другие модули, получать их инстансы и, самое важное, "),n("b",[e._v("подписаться на\n            события")]),e._v(". Это единственный правильный способ реализовывать логику. Событий может быть великое множество,\n        вы так же можете создавать свои евенты и позволять другим модулям реагировать на события вашего модуля.")]),e._v(" "),n("p",[e._v("Встроеные общие события находятся в pro.gravit.launcher.modules.event")]),e._v(" "),n("p",[e._v("События лаунчсервера находятся в pro.gravit.launchserver.modules.events. Именно их вы должны использовать при\n        работе с лаунчсервером, так как внутри этих евентов вы получаете инстанс LaunchServer, центральный инстанс всего\n        лаунчсервера, откуда можно добраться до всего")]),e._v(" "),n("p",[e._v('События лаунчера находятся в pro.gravit.launcher.client.events. Именно их вы должны использовать при работе с\n        лаунчером, так как они содержат основные объекты. В отличии от лаунчсервера тут нет как такового "центрального"\n        объекта. Большинство функций статические и получение объекта для их использования не требуется. При этом если вы\n        хотите работать с GUI на 5.1.0+ то вам необходимо еще учесть события модуля Java рантайма')]),e._v(" "),n("p",[e._v("Для подписки на событие вы должны создать метод в вашем классе, принимающий 1 аргумент соответствующий типу\n        евента что вы хотите обрабатывать, после чего в init вы должны вызвать registerEvent, первый аргумент - ваш\n        метод-обработчик, второй аргумент - класс интересующего вас евента")]),e._v(" "),n("p",[e._v("Обратите внимание при загрузке модуля через loadModule евенты, которые уже прошли не вызываются, вместо этого вам\n        передается initContext")]),e._v(" "),n("h3",[e._v("Общие возможности API")]),e._v(" "),n("p",[e._v("Хелперы - классы помощники, упростят вам рутиные задачи. Они находятся в pro.gravit.utils.helper и "),n("b",[e._v("доступны\n            извне при включенном proguard")]),e._v("(тоесть вы можете ими пользоваться в майнкрафт клиенте, модах)")]),e._v(" "),n("p",[e._v("Сериализация абстрактных классов или интерфейсов(AuthProvider/AuthHandler и всё что имеет type в сериализованном\n        виде) выполняется с помощью pro.gravit.utils.ProviderMap и pro.gravit.utils.UniversalJsonAdapter "),n("b",[e._v("доступны\n            извне при включенном proguard")])]),e._v(" "),n("p",[e._v("Запросы к лаунчсерверу. Находятся в pro.gravit.launcher.request(ответы в pro.gravit.launcher.events) и\n        "),n("b",[e._v("доступны извне при включенном proguard")]),e._v(". Блокирующий(синхронный) запрос выполняется с помощью создания\n        инстанса нужного Request и выполнения метода request(). Этот метод блокирует поток до того как ответ не придет,\n        а следовательно может серьезно затормозить работу при непраивльном проектировании. Используйте эту возможность с\n        осторожностью"),n("br"),e._v("Неблокирующий(асинхронный) заключается в использовании метода request класса\n        StdWebSocketService(5.1.0+), который возвращает не результат, а CompletableFuture, на который вы должны повесить\n        обработку успешного завершения запроса и ошибки(см документацию по CompletableFuture, там очень много всего\n        интересного). Позволяет дождаться завершения нескольких запросов, одного из, проводить любые манипуляции и\n        логику. Для ветки 5.0.X этот код придется реализовывать самостоятельно(см AsyncEventHandler в ранних версиях\n        JavaRuntime) Этот метод рекомендуется к использованию")]),e._v(" "),n("p",[e._v("Подсистема команд. Довольно обширная и интересная система, находится в pro.gravit.utils.command. Поддерживается\n        разделение команд на категории, добавление, удаление команды и замена своей реализацией. Поддерживается\n        автокомплит, подкоманды. Некоторое представление о возможностях этой системы можно получить изучив тесты в\n        LauncherCore")]),e._v(" "),n("p",[e._v("Хеширование директорий, Diff'ы. Находятся в pro.gravit.launcher.hasher и главная их задача - определять разницу\n        между двумя директориями(недостающие/измененные и лишние файлы). На них построена система обновления")]),e._v(" "),n("p",[e._v("Скачивание списка файлов в несколько потоков. pro.gravit.launcher.AsyncDownloader в 5.1.0+ и\n        pro.gravit.launcher.downloader.ListDownloader в 5.0.X позволяют скачать список файлов по http в несколько\n        потоков наиболее оптимальным способом с максимальной скоростью")]),e._v(" "),n("h3",[e._v("Основные API лаунчсервера")]),e._v(" "),n("p",[e._v("Ответы на запросы. Находятся в pro.gravit.launchserver.socket.response и определяют всю логику ответа на какой\n        либо запрос. Вы можете зарегистрировать свой Response вызвав WebSocketService.providers.register . Для отправки\n        ошибки используется sendError(если ваш Response наследуется от SimpleResponse(рекомендуется)), для отправки\n        результата sendObject. Для получения параметров просто создаете поле нужного типа в вашем Response, сериализация\n        gson сделает свое дело и в момент выполнения все эти поля будут содержать данные полученные из json запроса\n        клиента. Обратите внимание на параметр requestUUID, он используется для определения на какой запрос поступил\n        данный ответ. При наследовании SimpleResponse и использовании sendObject/sendError класс SimpleResponse\n        позаботится об этом за вас. В противном случае будьте внимательны и если что то происходит непонятное откройте\n        wireshark")]),e._v(" "),n("p",[e._v('Работа с подключенными клиентами. События. События можно отправлять и без запроса, для чего необходимо\n        воспользоваться методами WebSocketService(launchserver.nettyServerSocketHandler.nettyServer.service), тут есть\n        методы как для отправки события конкретному клиенту, так и всем подключенным клиентам. Если вам необходимо\n        отправить события выборочно, просмотреть список клиентов или что то подобное - обратитесь к коду\n        pro.gravit.launchserver.command.service.ClientsCommand(получение WebSocketFrameHandler из netty pipeline и\n        оттуда уже доставать информацию). Некоторые ответы на запросы(то что называется RequestEvent) могут быть посланы\n        без запроса, для чего в requestUUID необходимо записать "UUID события"(5.1.0+), который находится в\n        RequestEvent.eventUUID. Это позволяет например удаленно авторизировать клиента, который не посылал запрос(пример\n        из модуля UnsafeCommandPack)')]),e._v(" "),n("p",[e._v("Сборка лаунчера. pipeline. Сборка лаунчера осуществляется на основе pipeline(pro.gravit.launchserver.binary).\n        Pipeline - это последовательный список задач, на вход задаче подают путь к входному файлу, а на выход ожидается\n        путь к выходному файлу. Выходной файла первой задачи является взодным файлом последующей задачи. Это позволяет\n        преобразовывать JAR по своему усмотрению, добавив свой Task в нужное место pipeline. Так же с 5.1.0(?)\n        поддерживается pipeline для EXE файлов.")]),e._v(" "),n("p",[e._v("AuthProvider/AuthHandler/HWIDHandler/TextureProvider всё это можно реализовать самостоятельно, создав класс,\n        отнаследовавшись от Handelr/Provider функционал которого вы хотите реализовать и зарегистрировав свой класс в\n        ProviderMap соответствующего Handler/Provider.")]),e._v(" "),n("p",[e._v("Компоненты. Компоненты - очень удобный способ конфигурировать ваш код. Помимо конфигурирования через\n        modulesConfigManager/JsonSerializable вы можете просто создать компонент и зарегистрировтаь его, в таком случае\n        ваш модуль будет конфигурироваться прямо из основного конфига, а вы получите удобные средства для реализации\n        ваших идей. Код компонентов и их реализация находится в pro.gravit.launchserver.components")]),e._v(" "),n("p",[e._v("Reconfigurable - это интерфейс создания команд для вашего Handler/Provider или компонента. Работает он на\n        механизме подкоманд, для вызова команд Reconfigurable используется команда config (имя компонента) (команда\n        компонента) (аргументы), поддерживается автокомплит. Вам необходимо всего лишь отнаследоваться от интерфейса\n        Reconfigurable и реализовать метод getCommands, где прописать все ваши команды. Если у вас Provider/Handler или\n        компонент команды зарегистрируются автоматически, если же этого не происходит вызовите\n        launchserver.registerObject")])])}]},C=n("VU/8")(null,b,!1,null,null,null).exports;s.default.use(i.a);var E=new i.a({routes:[{path:"/",name:"WikiIndex",component:_},{path:"/authprovider",name:"WikiAuthProvider",component:o},{path:"/authhandler",name:"WikiAuthHandler",component:h},{path:"/protection",name:"WikiProtection",component:u},{path:"/clientbuild",name:"WikiClientBuild",component:m},{path:"/serverbuild",name:"WikiServerBuild",component:f},{path:"/developerapi",name:"WikiDeveloperAPI",component:C}]}),L=n("Tqaz"),j=n("5CJf"),S=n.n(j);n("Jmt5"),n("9M+g");s.default.use(S.a),s.default.use(L.a),s.default.config.productionTip=!1,new s.default({el:"#app",router:E,components:{App:r},template:"<App/>"})},T53T:function(e,t){},zB57:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.25c1452e86f0fccdd624.js.map